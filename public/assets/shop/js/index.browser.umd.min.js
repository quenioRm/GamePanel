!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Hackle={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},t(e,r)};function r(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function i(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var s=0,a=1,u=2,c=3,f=4,l=function(){function e(){}return e.setLogLevel=function(e){void 0===e&&(e=c),this.logLevel=e},e._log=function(e,t){var r;switch(e){case"WARN":r="orange";break;case"ERROR":r="red";break;default:r="#AAAAAA"}if(t instanceof Error)p.log(e,r,t.message,t);else try{p.log(e,r,t)}catch(e){}},e.logLevel=c,e.log={error:function(t){e.logLevel>=a&&e._log("ERROR",t)},warn:function(t){e.logLevel>=u&&e._log("WARN",t)},info:function(t){e.logLevel>=c&&e._log("INFO",t)},debug:function(t){e.logLevel>=f&&e._log("DEBUG",t)}},e}(),p=function(){function e(){}return e.log=function(e,t,r,n){try{console.log("%c[".concat(e,"] Hackle: ").concat(r),"color: ".concat(t))}catch(e){}},e}(),d="X-HACKLE-SDK-KEY",h="X-HACKLE-SDK-NAME",v="X-HACKLE-SDK-VERSION",y="X-HACKLE-SDK-TIME",g=3e3,m=[0,8,16,32,64,128,256,512],w="_hackle_hid",E="_hackle_id",T="_hackle_session_id",b="_hackle_last_event_ts",I="_hackle_uid",N="_hackle_did",O=l.log;function _(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])}var R={getRequest:function(e,t){return{abort:function(){},responsePromise:new Promise((function(r,n){var i=new XMLHttpRequest;i.open("GET",e),i.onreadystatechange=function(){if(i.readyState===i.DONE){if(0===i.status)return void n(new Error("Request error"));r({statusCode:i.status,body:i.responseText})}},i.onerror=function(){n()},i.setRequestHeader("content-type","application/json"),_(i,t),i.send()}))}},postRequest:function(e,t,r,n,i){var o=JSON.stringify(t),s=new XMLHttpRequest;s.open("POST",e),s.onreadystatechange=function(){s.readyState===s.DONE&&(s.status>=200&&s.status<400?n({statusCode:s.status}):i&&i({statusCode:s.status}))},s.setRequestHeader("content-type","application/json"),_(s,r),s.send(o)},sendBeacon:function(e,t,r,n,i){var o=!1;if("undefined"!=typeof window&&(o=window&&window.navigator&&window.navigator.sendBeacon&&!0),o){var s=JSON.stringify(t),a=new URLSearchParams;a.append("sdkName",r[h]),a.append("sdkVersion",r[v]),a.append("data",s),window.navigator.sendBeacon(e,a),n()}else O.error("Does not support sendBeacon"),i()}},A=function(){function e(){}return e.isNotNullOrUndefined=function(e){return null!=e},e.isNullOrUndefined=function(e){return null==e},e.requiredNotNullOrUndefined=function(e,t){if(void 0===t&&(t=function(){return"Required value is null or undefined"}),this.isNullOrUndefined(e))throw new Error(t());return e},e}(),S=l.log,C=function(){function e(e,t){this.value=e,this.reason=t}return e.of=function(t,r){return new e(t,r)},e}(),k=function(){function e(e,t,r){this.variation=e,this.reason=t,this.config=r}return e.of=function(t,r,n){return void 0===n&&(n=new P),new e(t,r,n)},e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),x=function(){function e(e,t,r){this.isOn=e,this.reason=t,this.config=r}return e.on=function(t,r){return void 0===r&&(r=new P),new e(!0,t,r)},e.off=function(t,r){return void 0===r&&(r=new P),new e(!1,t,r)},e.prototype.get=function(e,t){return this.config.get(e,t)},e}(),M=function(){function e(){}return e.prototype.get=function(e,t){return t},e}(),P=function(){function e(){}return e.prototype.get=function(e,t){return t},e}(),U=function(){function e(){}return e.SDK_NOT_READY="SDK_NOT_READY",e.EXCEPTION="EXCEPTION",e.INVALID_INPUT="INVALID_INPUT",e.EXPERIMENT_NOT_FOUND="EXPERIMENT_NOT_FOUND",e.EXPERIMENT_DRAFT="EXPERIMENT_DRAFT",e.EXPERIMENT_PAUSED="EXPERIMENT_PAUSED",e.EXPERIMENT_COMPLETED="EXPERIMENT_COMPLETED",e.OVERRIDDEN="OVERRIDDEN",e.TRAFFIC_NOT_ALLOCATED="TRAFFIC_NOT_ALLOCATED",e.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT="NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT",e.IDENTIFIER_NOT_FOUND="IDENTIFIER_NOT_FOUND",e.VARIATION_DROPPED="VARIATION_DROPPED",e.TRAFFIC_ALLOCATED="TRAFFIC_ALLOCATED",e.NOT_IN_EXPERIMENT_TARGET="NOT_IN_EXPERIMENT_TARGET",e.FEATURE_FLAG_NOT_FOUND="FEATURE_FLAG_NOT_FOUND",e.FEATURE_FLAG_INACTIVE="FEATURE_FLAG_INACTIVE",e.INDIVIDUAL_TARGET_MATCH="INDIVIDUAL_TARGET_MATCH",e.TARGET_RULE_MATCH="TARGET_RULE_MATCH",e.DEFAULT_RULE="DEFAULT_RULE",e.REMOTE_CONFIG_PARAMETER_NOT_FOUND="REMOTE_CONFIG_PARAMETER_NOT_FOUND",e.TYPE_MISMATCH="TYPE_MISMATCH",e}(),D=function(){function e(e,t,r,n,i,o,s,a,u,c,f,l,p,d){this.id=e,this.key=t,this.type=r,this.identifierType=n,this.status=i,this.version=o,this.variations=s,this.userOverrides=a,this.segmentOverrides=u,this.targetAudiences=c,this.targetRules=f,this.defaultRule=l,this.containerId=p,this._winnerVariationId=d}return e.prototype._winnerVariationOrNull=function(){if(this._winnerVariationId)return this._getVariationByIdOrNull(this._winnerVariationId)},e.prototype._getVariationByIdOrNull=function(e){return this.variations.find((function(t){return t.id===e}))},e.prototype._getVariationByKeyOrNull=function(e){return this.variations.find((function(t){return t.key===e}))},e}(),L=function(e,t,r,n){this.id=e,this.key=t,this.isDropped=r,this.parameterConfigurationId=n},F=function(e,t,r){this.seed=e,this.slotSize=t,this.slots=r},j=function(){function e(e,t,r){this.startInclusive=e,this.endExclusive=t,this.variationId=r}return e.prototype.contains=function(e){return this.startInclusive<=e&&e<this.endExclusive},e}(),V=function(e,t){this.id=e,this.key=t},G=function(){function e(){}return e.ID="$id",e.USER="$userId",e.DEVICE="$deviceId",e.SESSION="$sessionId",e.HACKLE_DEVICE="$hackleDeviceId",e}(),H=function(){function e(){this.identifiers={}}return e.prototype.addIdentifiers=function(e){for(var t in e)this.add(t,e[t]);return this},e.prototype.add=function(e,t){var r=Y(t);return z(e)&&r?this.identifiers[e]=t:S.warn("Invalid user identifier [type=".concat(e,", value=").concat(t,"]")),this},e.prototype.build=function(){return this.identifiers},e}(),B=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e},K=function(e){return"string"==typeof e},z=function(e){return"string"==typeof e&&e.length<=128&&""!==e.trim()},q=function(e){var t,r,n,i={};return i.id=null!==(t=Y(e.id))&&void 0!==t?t:void 0,i.userId=null!==(r=Y(e.userId))&&void 0!==r?r:void 0,i.deviceId=null!==(n=Y(e.deviceId))&&void 0!==n?n:void 0,"object"==typeof e.properties&&(i.properties=W(e.properties)),"object"==typeof e.identifiers&&(i.identifiers=X(e.identifiers)),function(e){return Boolean(e.id||e.userId||e.deviceId||e.identifiers&&Object.keys(e.identifiers).length>0)}(i)?i:null},Y=function(e){return"string"==typeof e&&e.length<=512&&""!==e.trim()?e:"number"==typeof e?e.toString():null},W=function(e){var t={};return Object.entries(e).forEach((function(e){var r=e[0],n=e[1];K(r)&&B(n)?t[r]=n:S.debug("Invalid property. Property key must be 'string' type and value must be 'string' or 'number' or 'boolean' type. [key=".concat(r,", value=").concat(n,"]"))})),t},X=function(e){var t={};return Object.entries(e).forEach((function(e){var r=e[0],n=e[1],i=Y(n);z(r)&&i?t[r]=i:S.debug("Invalid identifier. Identifier type must be 'string' type and value must be 'string' type. [type=".concat(r,", value=").concat(n,"]"))})),t},$=function(e){this.conditions=e},Q=function(e,t){this.key=e,this.match=t},J=function(e,t){this.type=e,this.name=t},Z=function(e,t,r,n){this.type=e,this.operator=t,this.valueType=r,this.values=n},ee=function(e,t,r){this.type=e,this.variationId=t,this.bucketId=r},te=function(e,t){this.target=e,this.action=t},re=function(e,t,r,n){this.id=e,this.key=t,this.type=r,this.targets=n},ne=function(){function e(e,t,r){this.id=e,this.bucketId=t,this.groups=r}return e.prototype.getGroupOrNull=function(e){return this.groups.find((function(t){return t.id===e}))},e}(),ie=function(e,t){this.id=e,this.experiments=t},oe=function(){function e(e,t){this.id=e,this.parameters=t}return e.prototype.get=function(e,t){var r=this.parameters.get(e);return A.isNullOrUndefined(r)?t:A.isNullOrUndefined(t)||typeof r==typeof t?r:t},e}(),se=function(e,t,r,n,i,o){this.id=e,this.key=t,this.type=r,this.identifierType=n,this.targetRules=i,this.defaultValue=o},ae=function(e,t,r,n,i){this.key=e,this.name=t,this.target=r,this.bucketId=n,this.value=i},ue=function(e,t){this.id=e,this.rawValue=t};function ce(e,t){return e-t}var fe,le=function(){function e(e,t,r){this.coreVersion=e,this.prerelease=t,this.build=r}return e.tryParse=function(t){var r=e.regExp.exec(t);if(r){r[0];var n=r[1],i=r[2],o=void 0===i?"0":i,s=r[3],a=void 0===s?"0":s,u=r[4],c=r[5];return new e(new pe(parseInt(n,10),parseInt(o,10),parseInt(a,10)),de.parse(u),de.parse(c))}},e.prototype.compareTo=function(e){return this.coreVersion.compareTo(e.coreVersion)||this.prerelease.compareTo(e.prerelease)},e.prototype.isEqualTo=function(e){return 0===this.compareTo(e)},e.prototype.isGreaterThan=function(e){return this.compareTo(e)>0},e.prototype.isGreaterThanOrEqualTo=function(e){return this.compareTo(e)>=0},e.prototype.isLessThan=function(e){return this.compareTo(e)<0},e.prototype.isLessThanOrEqualTo=function(e){return this.compareTo(e)<=0},e.regExp=/^(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?(?:\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,e}(),pe=function(){function e(e,t,r){this.major=e,this.minor=t,this.patch=r}return e.prototype.compareTo=function(e){return ce(this.major,e.major)||ce(this.minor,e.minor)||ce(this.patch,e.patch)},e}(),de=function(){function e(e){this.identifiers=e}return e.parse=function(t){return t?new e(t.split(".")):e.EMPTY},e.prototype.isEmpty=function(){return 0===this.identifiers.length},e.prototype.isNotEmpty=function(){return!this.isEmpty()},e.prototype.compareTo=function(e){return this.isEmpty()&&e.isEmpty()?0:this.isEmpty()&&e.isNotEmpty()?1:this.isNotEmpty()&&e.isEmpty()?-1:this.compareIdentifiers(e)},e.prototype.compareIdentifiers=function(t){for(var r=Math.min(this.identifiers.length,t.identifiers.length),n=0;n<r;n++){var i=e.compareIdentifiers(this.identifiers[n],t.identifiers[n]);if(0!==i)return i}return ce(this.identifiers.length,t.identifiers.length)},e.compareIdentifiers=function(t,r){return e.numericIdentifierRegExp.test(t)&&e.numericIdentifierRegExp.test(r)?ce(+t,+r):t===r?0:t<r?-1:1},e.EMPTY=new e([]),e.numericIdentifierRegExp=/^(0|[1-9]\d*)$/,e}(),he=["MATCH","NOT_MATCH"],ve=["STRING","NUMBER","BOOLEAN","VERSION","JSON","NULL","UNKNOWN"],ye=["IN","CONTAINS","STARTS_WITH","ENDS_WITH","GT","GTE","LT","LTE"],ge=["VARIATION","BUCKET"],me=["USER_ID","USER_PROPERTY","HACKLE_PROPERTY","SEGMENT"],we=["USER_ID","USER_PROPERTY"],Ee=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.supportedKeyTypes=e}return e.prototype.supports=function(e){return this.supportedKeyTypes.includes(e)},e.IDENTIFIER=new e("SEGMENT"),e.PROPERTY=new e("SEGMENT","USER_PROPERTY","HACKLE_PROPERTY"),e.SEGMENT=new e("USER_ID","USER_PROPERTY","HACKLE_PROPERTY"),e}(),Te=l.log,be=function(){function e(e,t,r,n){this.client=e,this.userManager=t,this.hackleUserResolver=r,this.user=n}return e.prototype.get=function(e,t){if(A.isNullOrUndefined(t))return this._get(e,"NULL",t).value;switch(typeof t){case"string":return this._get(e,"STRING",t).value;case"number":return this._get(e,"NUMBER",t).value;case"boolean":return this._get(e,"BOOLEAN",t).value;default:return this._get(e,"UNKNOWN",t).value}},e.prototype._get=function(e,t,r){try{if(A.isNullOrUndefined(e))return C.of(r,U.INVALID_INPUT);var n=this.hackleUserResolver.resolveCurrentUser();return this.client._remoteConfig(e,n,t,r)}catch(t){return Te.error("Unexpected exception while deciding remote config parameter[".concat(e,"]. Returning default value. : ").concat(t)),C.of(r,U.EXCEPTION)}},e}(),Ie=l.log,Ne=function(){function e(e,t,r,n){this.hackleInternalClient=e,this.hackleUserResolver=t,this.sessionManager=r,this.userManager=n}return e.prototype.getSessionId=function(){return this.sessionManager.sessionId},e.prototype.getUser=function(){return this.userManager.currentUser},e.prototype.setUser=function(e){try{var t=q(e);if(!t)return void Ie.warn("invalid user");this.userManager.setUser(t)}catch(e){Ie.error("Unexpected exception while set user: ".concat(e))}},e.prototype.setUserId=function(e){try{void 0===e&&this.userManager.setUserId(void 0);var t=Y(e);if(!t)return void Ie.warn("Invalid userId. [userId=".concat(e,"]"));this.userManager.setUserId(t)}catch(e){Ie.error("Unexpected exception while set userId: ".concat(e))}},e.prototype.setDeviceId=function(e){try{if(!Y(e))return void Ie.warn("Invalid deviceId. [deviceId=".concat(e,"]"));this.userManager.setDeviceId(e)}catch(e){Ie.error("Unexpected exception while set deviceId: ".concat(e))}},e.prototype.setUserProperty=function(e,t){try{if(!K(e))return void Ie.warn("Invalid property key. [key=".concat(e,"]"));if(!B(t))return void Ie.warn("Invalid property value. [key=".concat(t,"]"));this.userManager.setUserProperty(e,t)}catch(e){Ie.error("Unexpected exception while set userProperty: ".concat(e))}},e.prototype.setUserProperties=function(e){try{var t=W(e);this.userManager.setUserProperties(t)}catch(e){Ie.error("Unexpected exception while set userProperties: ".concat(e))}},e.prototype.resetUser=function(){try{this.userManager.resetUser()}catch(e){Ie.error("Unexpected exception while reset user: ".concat(e))}},e.prototype.variation=function(e,t,r){return this.variationDetail(e,t,r).variation},e.prototype.variationDetail=function(e,t,r){var n=r||"A";try{var i=this.userManager.resolveCurrentOrNull(t);if(!i)return Ie.warn("invalid user"),k.of(n,U.INVALID_INPUT);var o=this.hackleUserResolver.resolve(i);return this.hackleInternalClient._experiment(e,o,n)}catch(t){return Ie.error("Unexpected exception while deciding variation for experiment[".concat(e,"]. Returning default variation[").concat(n,"] : ").concat(t)),k.of(n,U.EXCEPTION)}},e.prototype.isFeatureOn=function(e,t){return this.featureFlagDetail(e,t).isOn},e.prototype.featureFlagDetail=function(e,t){try{var r=this.userManager.resolveCurrentOrNull(t);if(!r)return Ie.warn("invalid user"),x.off(U.INVALID_INPUT);var n=this.hackleUserResolver.resolve(r);return this.hackleInternalClient._featureFlag(e,n)}catch(t){return Ie.error("Unexpected exception while deciding feature flag[".concat(e,"]. Returning default value[false] : ").concat(t)),x.off(U.EXCEPTION)}},e.prototype.track=function(e,t){try{Ie.debug("track event : ".concat(JSON.stringify(e)));var r=this._convertEvent(e),n=this.userManager.resolveCurrentOrNull(t);if(!n)return void Ie.warn("invalid user");var i=this.hackleUserResolver.resolve(n);this.hackleInternalClient._track(r,i)}catch(e){Ie.error("Unexpected exception while tracking event: $t")}},e.prototype.trackPageView=function(e){Ie.debug("tracking page view");var t=this.hackleUserResolver.resolve(this.userManager.currentUser);this.hackleInternalClient._track({key:"$page_view"},t)},e.prototype.remoteConfig=function(e){return new be(this.hackleInternalClient,this.userManager,this.hackleUserResolver,e)},e.prototype.onReady=function(e,t){void 0===t&&(t=g),this.hackleInternalClient._onReady(e,t)},e.prototype.onInitialized=function(e){return this.hackleInternalClient._onInitialized({timeout:null==e?void 0:e.timeout})},e.prototype.close=function(){Ie.debug("Hackle Client is closing"),this.hackleInternalClient._close()},e.prototype._convertEvent=function(e){return"string"==typeof e?{key:e}:e},e}(),Oe=new Uint8Array(16);function _e(){if(!fe&&!(fe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fe(Oe)}var Re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ae(e){return"string"==typeof e&&Re.test(e)}for(var Se=[],Ce=0;Ce<256;++Ce)Se.push((Ce+256).toString(16).substr(1));function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Se[e[t+0]]+Se[e[t+1]]+Se[e[t+2]]+Se[e[t+3]]+"-"+Se[e[t+4]]+Se[e[t+5]]+"-"+Se[e[t+6]]+Se[e[t+7]]+"-"+Se[e[t+8]]+Se[e[t+9]]+"-"+Se[e[t+10]]+Se[e[t+11]]+Se[e[t+12]]+Se[e[t+13]]+Se[e[t+14]]+Se[e[t+15]]).toLowerCase();if(!Ae(r))throw TypeError("Stringified UUID is invalid");return r}function xe(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=function(e){if(!Ae(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return ke(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function Me(e){return 14+(e+64>>>9<<4)+1}function Pe(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Ue(e,t,r,n,i,o){return Pe((s=Pe(Pe(t,e),Pe(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function De(e,t,r,n,i,o,s){return Ue(t&r|~t&n,e,t,i,o,s)}function Le(e,t,r,n,i,o,s){return Ue(t&n|r&~n,e,t,i,o,s)}function Fe(e,t,r,n,i,o,s){return Ue(t^r^n,e,t,i,o,s)}function je(e,t,r,n,i,o,s){return Ue(r^(t|~n),e,t,i,o,s)}function Ve(e,t,r){var n=(e=e||{}).random||(e.rng||_e)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return ke(n)}function Ge(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function He(e,t){return e<<t|e>>>32-t}xe("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[Me(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,u=n,c=i,f=o;r=De(r,n,i,o,e[s],7,-680876936),o=De(o,r,n,i,e[s+1],12,-389564586),i=De(i,o,r,n,e[s+2],17,606105819),n=De(n,i,o,r,e[s+3],22,-1044525330),r=De(r,n,i,o,e[s+4],7,-176418897),o=De(o,r,n,i,e[s+5],12,1200080426),i=De(i,o,r,n,e[s+6],17,-1473231341),n=De(n,i,o,r,e[s+7],22,-45705983),r=De(r,n,i,o,e[s+8],7,1770035416),o=De(o,r,n,i,e[s+9],12,-1958414417),i=De(i,o,r,n,e[s+10],17,-42063),n=De(n,i,o,r,e[s+11],22,-1990404162),r=De(r,n,i,o,e[s+12],7,1804603682),o=De(o,r,n,i,e[s+13],12,-40341101),i=De(i,o,r,n,e[s+14],17,-1502002290),r=Le(r,n=De(n,i,o,r,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=Le(o,r,n,i,e[s+6],9,-1069501632),i=Le(i,o,r,n,e[s+11],14,643717713),n=Le(n,i,o,r,e[s],20,-373897302),r=Le(r,n,i,o,e[s+5],5,-701558691),o=Le(o,r,n,i,e[s+10],9,38016083),i=Le(i,o,r,n,e[s+15],14,-660478335),n=Le(n,i,o,r,e[s+4],20,-405537848),r=Le(r,n,i,o,e[s+9],5,568446438),o=Le(o,r,n,i,e[s+14],9,-1019803690),i=Le(i,o,r,n,e[s+3],14,-187363961),n=Le(n,i,o,r,e[s+8],20,1163531501),r=Le(r,n,i,o,e[s+13],5,-1444681467),o=Le(o,r,n,i,e[s+2],9,-51403784),i=Le(i,o,r,n,e[s+7],14,1735328473),r=Fe(r,n=Le(n,i,o,r,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=Fe(o,r,n,i,e[s+8],11,-2022574463),i=Fe(i,o,r,n,e[s+11],16,1839030562),n=Fe(n,i,o,r,e[s+14],23,-35309556),r=Fe(r,n,i,o,e[s+1],4,-1530992060),o=Fe(o,r,n,i,e[s+4],11,1272893353),i=Fe(i,o,r,n,e[s+7],16,-155497632),n=Fe(n,i,o,r,e[s+10],23,-1094730640),r=Fe(r,n,i,o,e[s+13],4,681279174),o=Fe(o,r,n,i,e[s],11,-358537222),i=Fe(i,o,r,n,e[s+3],16,-722521979),n=Fe(n,i,o,r,e[s+6],23,76029189),r=Fe(r,n,i,o,e[s+9],4,-640364487),o=Fe(o,r,n,i,e[s+12],11,-421815835),i=Fe(i,o,r,n,e[s+15],16,530742520),r=je(r,n=Fe(n,i,o,r,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=je(o,r,n,i,e[s+7],10,1126891415),i=je(i,o,r,n,e[s+14],15,-1416354905),n=je(n,i,o,r,e[s+5],21,-57434055),r=je(r,n,i,o,e[s+12],6,1700485571),o=je(o,r,n,i,e[s+3],10,-1894986606),i=je(i,o,r,n,e[s+10],15,-1051523),n=je(n,i,o,r,e[s+1],21,-2054922799),r=je(r,n,i,o,e[s+8],6,1873313359),o=je(o,r,n,i,e[s+15],10,-30611744),i=je(i,o,r,n,e[s+6],15,-1560198380),n=je(n,i,o,r,e[s+13],21,1309151649),r=je(r,n,i,o,e[s+4],6,-145523070),o=je(o,r,n,i,e[s+11],10,-1120210379),i=je(i,o,r,n,e[s+2],15,718787259),n=je(n,i,o,r,e[s+9],21,-343485551),r=Pe(r,a),n=Pe(n,u),i=Pe(i,c),o=Pe(o,f)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(Me(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),xe("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=e[64*u+4*f]<<24|e[64*u+4*f+1]<<16|e[64*u+4*f+2]<<8|e[64*u+4*f+3];a[u]=c}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<s;++l){for(var p=new Uint32Array(80),d=0;d<16;++d)p[d]=a[l][d];for(var h=16;h<80;++h)p[h]=He(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);for(var v=r[0],y=r[1],g=r[2],m=r[3],w=r[4],E=0;E<80;++E){var T=Math.floor(E/20),b=He(v,5)+Ge(T,y,g,m)+w+t[T]+p[E]>>>0;w=m,m=g,g=He(y,30)>>>0,y=v,v=b}r[0]=r[0]+v>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));var Be=function(){function e(){}return e.filteredProperties=function(e){var t=this;return Object.keys(e).filter((function(r){return t.validProperty(r,e[r])})).reduce((function(r,i){var o;return n(n({},r),((o={})[i]=t.filteredPropertiesValue(i,e[i]),o))}),{})},e.filteredPropertiesValue=function(t,r){return t.startsWith(e.SYSTEM_PROPERTY_KEY_PREFIX)?r:"string"==typeof r&&r.length>1024?r.slice(0,1024):r},e.validProperty=function(e,t){return!!e&&("string"==typeof e&&(!(e.length>128)&&("string"==typeof t||("boolean"==typeof t||"number"==typeof t&&(!isNaN(t)&&isFinite(t))))))},e.SYSTEM_PROPERTY_KEY_PREFIX="$",e}(),Ke=function(){function e(e,t,r){void 0===r&&(r=Ve()),this.timestamp=e,this.user=t,this.insertId=r}return e.exposure=function(e,t,r){return new ze((new Date).getTime(),t,e,r.variationId,r.variationKey,r.reason,this.exposureProperties(r))},e.exposureProperties=function(e){return A.isNotNullOrUndefined(e.config)?{$parameterConfigurationId:e.config.id}:{}},e.track=function(e,t,r,n){return new qe(n,r,e,t)},e.remoteConfig=function(e,t,r){return new Ye((new Date).getTime(),t,e,r)},e.isExposure=function(e){return void 0!==e.experiment},e.isTrack=function(e){return void 0!==e.eventType},e.isRemoteConfig=function(e){return void 0!==e.remoteConfigParameter},e.isExposureDto=function(e){return"experimentId"in e&&void 0!==e.experimentId},e.isTrackDto=function(e){return"eventTypeId"in e&&void 0!==e.eventTypeId},e.isRemoteConfigDto=function(e){return"parameterId"in e&&void 0!==e.parameterId},e.prototype.toDto=function(){return{insertId:this.insertId,timestamp:this.timestamp,userId:this.user.identifiers[G.ID],identifiers:this.user.identifiers,userProperties:Be.filteredProperties(this.user.properties),hackleProperties:Be.filteredProperties(this.user.hackleProperties)}},e}(),ze=function(e){function t(t,r,n,i,o,s,a,u){var c=e.call(this,t,r,u)||this;return c.experiment=n,c.variationId=i,c.variationKey=o,c.decisionReason=s,c.properties=a,c}return r(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.experiment,this.variationId,this.variationKey,this.decisionReason,this.properties,this.insertId)},t.prototype.toDto=function(){return n(n({},e.prototype.toDto.call(this)),{experimentId:this.experiment.id,experimentKey:this.experiment.key,experimentType:this.experiment.type,experimentVersion:this.experiment.version,variationId:this.variationId,variationKey:this.variationKey,decisionReason:this.decisionReason.toString(),properties:this.properties})},t}(Ke),qe=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,o)||this;return s.eventType=n,s.event=i,s}return r(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.eventType,this.event,this.insertId)},t.prototype.toDto=function(){return n(n({},e.prototype.toDto.call(this)),{eventTypeId:this.eventType.id,eventTypeKey:this.eventType.key,value:this.event.value||0,properties:Be.filteredProperties(this.event.properties||{})})},t}(Ke),Ye=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,o)||this;return s.remoteConfigParameter=n,s.evaluation=i,s}return r(t,e),t.prototype.copyWithUser=function(e){return new t(this.timestamp,e,this.remoteConfigParameter,this.evaluation,this.insertId)},t.prototype.toDto=function(){return n(n({},e.prototype.toDto.call(this)),{parameterId:this.remoteConfigParameter.id,parameterKey:this.remoteConfigParameter.key,parameterType:this.remoteConfigParameter.type,valueId:this.evaluation.valueId,decisionReason:this.evaluation.reason.toString(),properties:Be.filteredProperties(this.evaluation.properties)})},t}(Ke);function We(e){var t=new Array,r=new Array,n=new Array;return e.forEach((function(e){e instanceof Ke?Ke.isExposure(e)?t.push(e.toDto()):Ke.isTrack(e)?r.push(e.toDto()):Ke.isRemoteConfig(e)&&n.push(e.toDto()):Ke.isExposureDto(e)?t.push(e):Ke.isTrackDto(e)?r.push(e):Ke.isRemoteConfigDto(e)&&n.push(e)})),{exposureEvents:t,trackEvents:r,remoteConfigEvents:n}}var Xe=function(){function e(e,t,r){this.sdkKey=e,this.httpRequest=t,this.headers=r.headers,this.dispatchUrl=r.dispatchUrl,this.beaconDispatchUrl=r.beaconDispatchUrl||"",this.useBeacon=r.useBeacon||!1}return e.prototype.dispatch=function(e,t,r){var n={};n[d]=this.sdkKey,n[h]=this.headers[h],n[v]=this.headers[v],n[y]=(new Date).getTime().toString();var i=We(e);this.httpRequest.postRequest(this.dispatchUrl,i,n,t,r)},e.prototype.dispatchXhrOrBeacon=function(e,t,r){if(this.useBeacon){var n={};n[d]=this.sdkKey,n[h]=this.headers[h],n[v]=this.headers[v],n[y]=(new Date).getTime().toString();var i=We(e);this.httpRequest.sendBeacon(this.beaconDispatchUrl,i,n,t,r)}else this.dispatch(e,t,r)},e}(),$e=function(){function e(){}return e.mapNotNullOrUndefined=function(e,t){for(var r=Array(),n=0,i=e;n<i.length;n++){var o=t(i[n]);A.isNotNullOrUndefined(o)&&r.push(o)}return r},e.associateTo=function(e,t,r){for(var n=0,i=e;n<i.length;n++){var o=r(i[n]);t.set(o[0],o[1])}return t},e.associate=function(e,t){return this.associateTo(e,new Map,t)},e.associateBy=function(e,t){return this.associate(e,(function(e){return[t(e),e]}))},e}(),Qe=l.log,Je=function(){function e(e,t,r,n,i,o,s,a){this.experiments=e,this.featureFlags=t,this.buckets=r,this.eventTypes=n,this.segments=i,this.containers=o,this.parameterConfigurations=s,this.remoteConfigParameters=a}return e.prototype.getExperimentOrNull=function(e){return this.experiments.get(e)},e.prototype.getFeatureFlagOrNull=function(e){return this.featureFlags.get(e)},e.prototype.getBucketOrNull=function(e){return this.buckets.get(e)},e.prototype.getEventTypeOrNull=function(e){return this.eventTypes.get(e)},e.prototype.getSegmentOrNull=function(e){return this.segments.get(e)},e.prototype.getContainerOrNull=function(e){return this.containers.get(e)},e.prototype.getParameterConfigurationOrNull=function(e){return this.parameterConfigurations.get(e)},e.prototype.getRemoteConfigParameterOrNull=function(e){return this.remoteConfigParameters.get(e)},e.from=function(t){var r=this,n=$e.associate(t.buckets,(function(e){return[e.id,r.toBucket(e)]}));return new e($e.associateBy($e.mapNotNullOrUndefined(t.experiments,(function(e){return r.toExperimentOrNull("AB_TEST",e)})),(function(e){return e.key})),$e.associateBy($e.mapNotNullOrUndefined(t.featureFlags,(function(e){return r.toExperimentOrNull("FEATURE_FLAG",e)})),(function(e){return e.key})),n,$e.associate(t.events,(function(e){return[e.key,new V(e.id,e.key)]})),$e.associateBy($e.mapNotNullOrUndefined(t.segments,(function(e){return r.toSegmentOrNull(e)})),(function(e){return e.key})),$e.associate(t.containers,(function(e){return[e.id,r.toContainer(e)]})),$e.associate(t.parameterConfigurations,(function(e){return[e.id,r.toParameterConfiguration(e)]})),$e.associateBy($e.mapNotNullOrUndefined(t.remoteConfigParameters,(function(e){return r.toRemoteConfigParameterOrNull(e)})),(function(e){return e.key})))},e.toBucket=function(e){return new F(e.seed,e.slotSize,e.slots.map((function(e){var t=e.startInclusive,r=e.endExclusive,n=e.variationId;return new j(t,r,n)})))},e.toExperimentOrNull=function(e,t){var r=this,n=this.experimentStatusOrNull(t.execution.status),i=t.variations.map((function(e){return new L(e.id,e.key,"DROPPED"===e.status,e.parameterConfigurationId)})),o=$e.associate(t.execution.userOverrides,(function(e){return[e.userId,e.variationId]})),s=$e.mapNotNullOrUndefined(t.execution.segmentOverrides,(function(e){return r.toTargetRuleOrNull(e,Ee.IDENTIFIER)})),a=$e.mapNotNullOrUndefined(t.execution.targetAudiences,(function(e){return r.toTargetOrNull(e,Ee.PROPERTY)})),u=$e.mapNotNullOrUndefined(t.execution.targetRules,(function(e){return r.toTargetRuleOrNull(e,Ee.PROPERTY)})),c=this.toTargetActionOrNull(t.execution.defaultRule);return n&&c&&new D(t.id,t.key,e,t.identifierType,n,t.version,i,o,s,a,u,c,t.containerId,t.winnerVariationId)},e.experimentStatusOrNull=function(e){switch(e){case"READY":return"DRAFT";case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"STOPPED":return"COMPLETED";default:return void Qe.debug("Unsupported status [".concat(e,"]"))}},e.toTargetRuleOrNull=function(e,t){var r=this.toTargetOrNull(e.target,t),n=this.toTargetActionOrNull(e.action);return r&&n&&new te(r,n)},e.toTargetActionOrNull=function(e){var t=this.parseOrNull(ge,e.type);return t&&new ee(t,e.variationId,e.bucketId)},e.toTargetOrNull=function(e,t){var r=this,n=$e.mapNotNullOrUndefined(e.conditions,(function(e){return r.toConditionOrNull(e,t)}));return new $(n)},e.toConditionOrNull=function(e,t){var r=this.toTargetKeyOrNull(e.key);if(r&&t.supports(r.type)){var n=this.toTargetMatchOrNull(e.match);return n&&new Q(r,n)}},e.toTargetKeyOrNull=function(e){var t=this.parseOrNull(me,e.type);return t&&new J(t,e.name)},e.toTargetMatchOrNull=function(e){var t=this.parseOrNull(he,e.type),r=this.parseOrNull(ye,e.operator),n=this.parseOrNull(ve,e.valueType);return t&&r&&n&&new Z(t,r,n,e.values)},e.toSegmentOrNull=function(e){var t=this,r=this.parseOrNull(we,e.type);return r&&new re(e.id,e.key,r,$e.mapNotNullOrUndefined(e.targets,(function(e){return t.toTargetOrNull(e,Ee.SEGMENT)})))},e.toContainer=function(e){var t=this;return new ne(e.id,e.bucketId,e.groups.map((function(e){return t.toContainerGroup(e)})))},e.toContainerGroup=function(e){return new ie(e.id,e.experiments)},e.toParameterConfiguration=function(e){return new oe(e.id,$e.associate(e.parameters,(function(e){return[e.key,e.value]})))},e.toRemoteConfigParameterOrNull=function(e){var t=this,r=this.parseOrNull(ve,e.type),n=$e.mapNotNullOrUndefined(e.targetRules,(function(e){return t.toRemoteConfigTargetRuleOrNull(e,Ee.PROPERTY)})),i=this.toRemoteConfigParameterValueOrNull(e.defaultValue);return r&&new se(e.id,e.key,r,e.identifierType,n,i)},e.toRemoteConfigTargetRuleOrNull=function(e,t){var r=this.toTargetOrNull(e.target,t);return r&&new ae(e.key,e.name,r,e.bucketId,this.toRemoteConfigParameterValueOrNull(e.value))},e.toRemoteConfigParameterValueOrNull=function(e){return new ue(e.id,e.value)},e.parseOrNull=function(e,t){var r=e.find((function(e){return e===t}));return r||Qe.debug("Unsupported type [".concat(t,"]. Please use the latest version of sdk.")),r},e}(),Ze=function(){function e(e,t,r){var n=this;this.workspace=null,this.sdkKey=e,this.httpRequest=t,this.isStarted=!1,this.updateInterval=r.updateInterval,this.fetchUrl=r.fetchUrl,this.headers=r.headers,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise((function(e,t){n.readyPromiseResolver=e,n.readyPromiseRejecter=t})),this.currentTimeout=null,this.errorRetryController=new et,this.currentRequest=null,this.syncOnCurrentRequestComplete=!1,this.isReadyPromiseSettled=!1}return e.prototype.onReady=function(){return this.readyPromise},e.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.errorRetryController.reset(),this.fetch())},e.prototype.stop=function(){return this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.get=function(){return this.workspace},e.prototype.scheduleNextUpdate=function(){var e=this,t=this.errorRetryController.getDelay(),r=Math.max(t,this.updateInterval);this.currentTimeout=setTimeout((function(){e.currentRequest?e.syncOnCurrentRequestComplete=!0:e.fetch()}),r)},e.prototype.fetch=function(){var e,t,r=this,n=((e={})[d]=this.sdkKey,e[y]=(new Date).getTime().toString(),e[h]=this.headers[h],e[v]=this.headers[v],e);this.currentRequest=this.httpRequest.getRequest(this.fetchUrl,n);var i=function(){r.onRequestComplete()};null===(t=this.currentRequest)||void 0===t||t.responsePromise.then((function(e){r.onRequestResolved(e)}),(function(e){r.onRequestRejected(e)})).then(i,i),this.updateInterval>0&&this.scheduleNextUpdate()},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.syncOnCurrentRequestComplete&&this.fetch(),this.syncOnCurrentRequestComplete=!1)},e.prototype.onRequestResolved=function(e){if(this.isStarted){if(void 0!==e.statusCode&&e.statusCode>=200&&e.statusCode<400)this.errorRetryController.reset();else{if(401===e.statusCode||403===e.statusCode)return void this.readyPromiseRejecter(new Error("Invalid key provided."));this.errorRetryController.countError()}if(e.body){var t=JSON.parse(e.body);this.workspace=Je.from(t),this.readyPromiseResolver()}}},e.prototype.onRequestRejected=function(e){this.isStarted&&(this.errorRetryController.countError(),console.error("Error fetching data",e))},e.prototype.close=function(){this.stop()},e}(),et=function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){return 0===this.errorCount?0:1e3*m[Math.min(m.length-1,this.errorCount)]+Math.round(1e3*Math.random())},e.prototype.countError=function(){this.errorCount<m.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e}(),tt="model",rt="name",nt="type",it="vendor",ot="version",st="architecture",at="console",ut="mobile",ct="tablet",ft="smarttv",lt="wearable",pt=function(){function e(){}return e.parse=function(t){return{browser:e.getBrowser(t),cpu:e.getCPU(t),device:e.getDevice(t),engine:e.getEngine(t),os:e.getOS(t)}},e.getBrowser=function(t){var r={name:void 0,version:void 0,major:void 0};return e.mapper.rgx.call(r,t,e.regexes.browser),r.major=e.util.major(r.version),r},e.getCPU=function(t){var r={architecture:void 0};return e.mapper.rgx.call(r,t,e.regexes.cpu),r},e.getDevice=function(t){var r={model:void 0,type:void 0,vendor:void 0};return e.mapper.rgx.call(r,t,e.regexes.device),r},e.getEngine=function(t){var r={name:void 0,version:void 0};return e.mapper.rgx.call(r,t,e.regexes.os),r},e.getOS=function(t){var r={name:void 0,version:void 0};return e.mapper.rgx.call(r,t,e.regexes.os),r},e.util={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},e.mapper={rgx:function(e,t){for(var r,n,i,o,s,a,u=0;u<t.length&&!s;){var c=t[u],f=t[u+1];for(r=n=0;r<c.length&&!s;)if(s=c[r++].exec(e))for(i=0;i<f.length;i++)a=s[++n],"object"==typeof(o=f[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4==o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;u+=2}},str:function(t,r){for(var n in r)if("object"==typeof r[n]&&r[n].length>0){for(var i=0;i<r[n].length;i++)if(e.util.has(r[n][i],t))return"?"===n?void 0:n}else if(e.util.has(r[n],t))return"?"===n?void 0:n;return t}},e.maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},e.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[rt,ot],[/(opios)[\/\s]+([\w\.]+)/i],[[rt,"Opera Mini"],ot],[/\s(opr)\/([\w\.]+)/i],[[rt,"Opera"],ot],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[rt,ot],[/(konqueror)\/([\w\.]+)/i],[[rt,"Konqueror"],ot],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[rt,"IE"],ot],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[rt,"Edge"],ot],[/(yabrowser)\/([\w\.]+)/i],[[rt,"Yandex"],ot],[/(Avast)\/([\w\.]+)/i],[[rt,"Avast Secure Browser"],ot],[/(AVG)\/([\w\.]+)/i],[[rt,"AVG Secure Browser"],ot],[/(puffin)\/([\w\.]+)/i],[[rt,"Puffin"],ot],[/(focus)\/([\w\.]+)/i],[[rt,"Firefox Focus"],ot],[/(opt)\/([\w\.]+)/i],[[rt,"Opera Touch"],ot],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[rt,"UCBrowser"],ot],[/(comodo_dragon)\/([\w\.]+)/i],[[rt,/_/g," "],ot],[/(windowswechat qbcore)\/([\w\.]+)/i],[[rt,"WeChat(Win) Desktop"],ot],[/(micromessenger)\/([\w\.]+)/i],[[rt,"WeChat"],ot],[/(brave)\/([\w\.]+)/i],[[rt,"Brave"],ot],[/(whale)\/([\w\.]+)/i],[[rt,"Whale"],ot],[/(qqbrowserlite)\/([\w\.]+)/i],[rt,ot],[/(QQ)\/([\d\.]+)/i],[rt,ot],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[rt,ot],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[rt,ot],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[rt,ot],[/(MetaSr)[\/\s]?([\w\.]+)/i],[rt],[/(LBBROWSER)/i],[rt],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[ot,[rt,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[ot,[rt,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[rt,ot],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[ot,[rt,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[rt,/(.+)/,"$1 WebView"],ot],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[rt,/(.+(?:g|us))(.+)/,"$1 $2"],ot],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[rt,"Chrome Mobile"],ot],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[ot,[rt,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[rt,"Sailfish Browser"],ot],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[rt,ot],[/(dolfin)\/([\w\.]+)/i],[[rt,"Dolphin"],ot],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[rt,"360 Browser"]],[/(coast)\/([\w\.]+)/i],[[rt,"Opera Coast"],ot],[/fxios\/([\w\.-]+)/i],[ot,[rt,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[ot,[rt,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[ot,rt],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[rt,"GSA"],ot],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[rt,[ot,e.mapper.str,e.maps.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[rt,ot],[/(navigator|netscape)\/([\w\.-]+)/i],[[rt,"Netscape"],ot],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[rt,ot]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[st,"amd64"]],[/(ia32(?=;))/i],[[st,e.util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[st,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[st,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[st,/ower/,"",e.util.lowerize]],[/(sun4\w)[;\)]/i],[[st,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[st,e.util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[tt,it,[nt,ct]],[/applecoremedia\/[\w\.]+ \((ipad)/],[tt,[it,"Apple"],[nt,ct]],[/(apple\s{0,1}tv)/i],[[tt,"Apple TV"],[it,"Apple"],[nt,ft]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[it,tt,[nt,ct]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[tt,[it,"Amazon"],[nt,ct]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[tt,e.mapper.str,e.maps.device.amazon.model],[it,"Amazon"],[nt,ut]],[/android.+aft([bms])\sbuild/i],[tt,[it,"Amazon"],[nt,ft]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[tt,it,[nt,ut]],[/\((ip[honed|\s\w*]+);/i],[tt,[it,"Apple"],[nt,ut]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[it,tt,[nt,ut]],[/\(bb10;\s(\w+)/i],[tt,[it,"BlackBerry"],[nt,ut]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[tt,[it,"Asus"],[nt,ct]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[it,"Sony"],[tt,"Xperia Tablet"],[nt,ct]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[tt,[it,"Sony"],[nt,ut]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[it,tt,[nt,at]],[/android.+;\s(shield)\sbuild/i],[tt,[it,"Nvidia"],[nt,at]],[/(playstation\s[34portablevi]+)/i],[tt,[it,"Sony"],[nt,at]],[/(sprint\s(\w+))/i],[[it,e.mapper.str,e.maps.device.sprint.vendor],[tt,e.mapper.str,e.maps.device.sprint.model],[nt,ut]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[it,[tt,/_/g," "],[nt,ut]],[/(nexus\s9)/i],[tt,[it,"HTC"],[nt,ct]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[tt,[it,"Huawei"],[nt,ut]],[/android.+(bah2?-a?[lw]\d{2})/i],[tt,[it,"Huawei"],[nt,ct]],[/(microsoft);\s(lumia[\s\w]+)/i],[it,tt,[nt,ut]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[tt,[it,"Microsoft"],[nt,at]],[/(kin\.[onetw]{3})/i],[[tt,/\./g," "],[it,"Microsoft"],[nt,ut]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[tt,[it,"Motorola"],[nt,ut]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[tt,[it,"Motorola"],[nt,ct]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[it,e.util.trim],[tt,e.util.trim],[nt,ft]],[/hbbtv.+maple;(\d+)/i],[[tt,/^/,"SmartTV"],[it,"Samsung"],[nt,ft]],[/\(dtv[\);].+(aquos)/i],[tt,[it,"Sharp"],[nt,ft]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[it,"Samsung"],tt,[nt,ct]],[/smart-tv.+(samsung)/i],[it,[nt,ft],tt],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[it,"Samsung"],tt,[nt,ut]],[/sie-(\w*)/i],[tt,[it,"Siemens"],[nt,ut]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[it,"Nokia"],tt,[nt,ut]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[tt,[it,"Acer"],[nt,ct]],[/android.+([vl]k\-?\d{3})\s+build/i],[tt,[it,"LG"],[nt,ct]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[it,"LG"],tt,[nt,ct]],[/(lg) netcast\.tv/i],[it,tt,[nt,ft]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[tt,[it,"LG"],[nt,ut]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[it,tt,[nt,ct]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[tt,[it,"Lenovo"],[nt,ct]],[/(lenovo)[_\s-]?([\w-]+)/i],[it,tt,[nt,ut]],[/linux;.+((jolla));/i],[it,tt,[nt,ut]],[/((pebble))app\/[\d\.]+\s/i],[it,tt,[nt,lt]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[it,tt,[nt,ut]],[/crkey/i],[[tt,"Chromecast"],[it,"Google"],[nt,ft]],[/android.+;\s(glass)\s\d/i],[tt,[it,"Google"],[nt,lt]],[/android.+;\s(pixel c)[\s)]/i],[tt,[it,"Google"],[nt,ct]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[tt,[it,"Google"],[nt,ut]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[tt,/_/g," "],[it,"Xiaomi"],[nt,ut]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[tt,/_/g," "],[it,"Xiaomi"],[nt,ct]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[tt,[it,"Meizu"],[nt,ut]],[/(mz)-([\w-]{2,})/i],[[it,"Meizu"],tt,[nt,ut]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[tt,[it,"OnePlus"],[nt,ut]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[tt,[it,"RCA"],[nt,ct]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[tt,[it,"Dell"],[nt,ct]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[tt,[it,"Verizon"],[nt,ct]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[it,"Barnes & Noble"],tt,[nt,ct]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[tt,[it,"NuVision"],[nt,ct]],[/android.+;\s(k88)\sbuild/i],[tt,[it,"ZTE"],[nt,ct]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[tt,[it,"Swiss"],[nt,ut]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[tt,[it,"Swiss"],[nt,ct]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[tt,[it,"Zeki"],[nt,ct]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[it,"Dragon Touch"],tt,[nt,ct]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[tt,[it,"Insignia"],[nt,ct]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[tt,[it,"NextBook"],[nt,ct]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[it,"Voice"],tt,[nt,ut]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[it,"LvTel"],tt,[nt,ut]],[/android.+;\s(PH-1)\s/i],[tt,[it,"Essential"],[nt,ut]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[tt,[it,"Envizen"],[nt,ct]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[it,tt,[nt,ct]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[tt,[it,"MachSpeed"],[nt,ct]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[it,tt,[nt,ct]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[tt,[it,"Rotor"],[nt,ct]],[/android.+(KS(.+))\s+build/i],[tt,[it,"Amazon"],[nt,ct]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[it,tt,[nt,ct]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[nt,e.util.lowerize],it,tt],[/[\s\/\(](smart-?tv)[;\)]/i],[[nt,ft]],[/(android[\w\.\s\-]{0,9});.+build/i],[tt,[it,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[ot,[rt,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ot,[rt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[rt,ot],[/rv\:([\w\.]{1,9}).+(gecko)/i],[ot,rt]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[rt,ot],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[rt,e.mapper.str,e.maps.os.windows],[ot,e.mapper.str,e.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[rt,"Windows"],[ot,e.mapper.str,e.maps.os.windows.version]],[/\((bb)(10);/i],[[rt,"BlackBerry"],ot],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[rt,ot],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[rt,"Symbian"],ot],[/\((series40);/i],[rt],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[rt,"Firefox OS"],ot],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[[rt,"Linux"],ot],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[rt,"Chromium OS"],ot],[/(sunos)\s?([\w\.\d]*)/i],[[rt,"Solaris"],ot],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[[rt,"Linux"],ot],[/(iphone)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[rt,"iPhone"],[ot,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[rt,"iPad"],[ot,/_/g,"."]],[/(haiku)\s(\w+)/i],[rt,ot],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[ot,/_/g,"."],[rt,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[rt,"Mac"],[ot,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[rt,ot]]},e}(),dt=function(){function e(){}return e.generate=function(e){var t,r;if(void 0===e){var n={hostname:"",pathname:"",host:"",search:"",protocol:""};r={navigator:{userAgent:"",vendor:"",languages:[]},document:{location:n,title:""},location:n,screen:{width:"",height:""}}}else r=e;var i=pt.parse(r.navigator.userAgent),o=i.browser,s=i.os,a=i.device,u=a.type?"mobile"===a.type?"Mobile":"ETC":"Web",c=(r.location.protocol||"").replace(":",""),f=r.screen,l="";try{l=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return{platform:u||"",browserName:o.name||"",browserMajorVersion:o.major||"",browserVersion:o.version||"",osName:s.name||"",osVersion:s.version||"",deviceModel:a.model||"",deviceType:a.type||"",deviceVendor:a.vendor||"",language:(null===(t=r.navigator.languages)||void 0===t?void 0:t[0])||"",userAgent:r.navigator.userAgent||"",pagePath:r.location.pathname||"",pageTitle:r.document.title||"",host:r.location.host||"",protocol:c,referrer:r.document.referrer||"",queryParameter:r.location.search||"",screenWidth:f.width||"",screenHeight:f.height||"",timeZone:l||""}},e}(),ht=function(){function e(e){void 0===e&&(e={days:0,isCrossSubdomain:!1,isSecure:!1,isCrossSite:!1}),this.options=e}return e.extractDomain=function(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,r=e.split("."),n=r[r.length-1];(n.length>4||"com"===n||"org"===n)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var i=e.match(t);return i?i[0]:""},e.prototype.getItem=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},e.prototype.setItem=function(t,r,i){var o=n(n({},this.options),i),s=o.isSecure,a="",u="",c="";if(o.isCrossSubdomain){var f=e.extractDomain(document.location.hostname);a=f?"; domain=."+f:""}if(o.days){var l=new Date;l.setTime(l.getTime()+24*o.days*60*60*1e3),u="; expires="+l.toUTCString()}o.isCrossSite&&(s=!0,c="; SameSite=None"),s&&(c+="; secure");var p=t+"="+encodeURIComponent(r)+u+"; path=/"+a+c;return document.cookie=p,p},e.prototype.removeItem=function(e,t){this.setItem(e,"",n(n({},t),{days:-1}))},e}(),vt=new ht({days:3650,isCrossSubdomain:!0}),yt=function(){function e(e){this.search=e}return e.prototype.getQueryParam=function(e){return this.getQueryParams((function(){return!0}))[e]||""},e.prototype.getQueryParams=function(e){for(var t={},r=0,n=this.search.substring(1).split("&");r<n.length;r++){var i=n[r].split("="),o=i[0],s=i[1];e(o,s)&&(t[o]=decodeURIComponent(s))}return t},e}(),gt=function(){function e(e){this.userManager=e,mt.initialize()}return e.prototype.resolve=function(e){var t=wt(),r=(new H).addIdentifiers(e.identifiers||{}).add(G.ID,e.id||t).add(G.DEVICE,e.deviceId||t).add(G.HACKLE_DEVICE,t);return A.isNotNullOrUndefined(e.userId)&&r.add(G.USER,e.userId),{identifiers:r.build(),properties:this._userProperties(e.properties),hackleProperties:this._getHackleProperties()}},e.prototype.resolveCurrentUser=function(){return this.resolve(this.userManager.currentUser)},e.prototype._userProperties=function(e){void 0===e&&(e={});var t={};if("undefined"!=typeof window){var r=new yt(window.location.search);t=n(n({},r.getQueryParams((function(e){return e.startsWith("utm_")}))),r.getQueryParams((function(e){return["gclid","fbclid"].includes(e)})))}return n(n({},t),e)},e.prototype._getHackleProperties=function(){var e;return"undefined"!=typeof window&&(e=dt.generate(window)),e||{}},e}(),mt=function(){function e(){}return e.initialize=function(){vt.getItem(w)||bt()},e.reInitialize=function(){bt()},e}();function wt(){var e=vt.getItem(E);if(e)return e;var t=vt.getItem(w);return t||bt()}function Et(e){vt.setItem(E,e)}function Tt(){vt.removeItem(E)}function bt(){var e=Ve();return vt.setItem(w,e),e}var It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Nt=function(e){return e&&e.Math==Math&&e},Ot=Nt("object"==typeof globalThis&&globalThis)||Nt("object"==typeof window&&window)||Nt("object"==typeof self&&self)||Nt("object"==typeof It&&It)||function(){return this}()||Function("return this")(),_t={},Rt=function(e){try{return!!e()}catch(e){return!0}},At=!Rt((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),St=!Rt((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),Ct=St,kt=Function.prototype.call,xt=Ct?kt.bind(kt):function(){return kt.apply(kt,arguments)},Mt={},Pt={}.propertyIsEnumerable,Ut=Object.getOwnPropertyDescriptor,Dt=Ut&&!Pt.call({1:2},1);Mt.f=Dt?function(e){var t=Ut(this,e);return!!t&&t.enumerable}:Pt;var Lt,Ft,jt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Vt=St,Gt=Function.prototype,Ht=Gt.bind,Bt=Gt.call,Kt=Vt&&Ht.bind(Bt,Bt),zt=Vt?function(e){return e&&Kt(e)}:function(e){return e&&function(){return Bt.apply(e,arguments)}},qt=zt,Yt=qt({}.toString),Wt=qt("".slice),Xt=function(e){return Wt(Yt(e),8,-1)},$t=Rt,Qt=Xt,Jt=Object,Zt=zt("".split),er=$t((function(){return!Jt("z").propertyIsEnumerable(0)}))?function(e){return"String"==Qt(e)?Zt(e,""):Jt(e)}:Jt,tr=TypeError,rr=function(e){if(null==e)throw tr("Can't call method on "+e);return e},nr=er,ir=rr,or=function(e){return nr(ir(e))},sr=function(e){return"function"==typeof e},ar=sr,ur=function(e){return"object"==typeof e?null!==e:ar(e)},cr=Ot,fr=sr,lr=function(e){return fr(e)?e:void 0},pr=function(e,t){return arguments.length<2?lr(cr[e]):cr[e]&&cr[e][t]},dr=zt({}.isPrototypeOf),hr=pr("navigator","userAgent")||"",vr=Ot,yr=hr,gr=vr.process,mr=vr.Deno,wr=gr&&gr.versions||mr&&mr.version,Er=wr&&wr.v8;Er&&(Ft=(Lt=Er.split("."))[0]>0&&Lt[0]<4?1:+(Lt[0]+Lt[1])),!Ft&&yr&&(!(Lt=yr.match(/Edge\/(\d+)/))||Lt[1]>=74)&&(Lt=yr.match(/Chrome\/(\d+)/))&&(Ft=+Lt[1]);var Tr=Ft,br=Tr,Ir=Rt,Nr=!!Object.getOwnPropertySymbols&&!Ir((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&br&&br<41})),Or=Nr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_r=pr,Rr=sr,Ar=dr,Sr=Object,Cr=Or?function(e){return"symbol"==typeof e}:function(e){var t=_r("Symbol");return Rr(t)&&Ar(t.prototype,Sr(e))},kr=String,xr=function(e){try{return kr(e)}catch(e){return"Object"}},Mr=sr,Pr=xr,Ur=TypeError,Dr=function(e){if(Mr(e))return e;throw Ur(Pr(e)+" is not a function")},Lr=Dr,Fr=function(e,t){var r=e[t];return null==r?void 0:Lr(r)},jr=xt,Vr=sr,Gr=ur,Hr=TypeError,Br={exports:{}},Kr=Ot,zr=Object.defineProperty,qr=function(e,t){try{zr(Kr,e,{value:t,configurable:!0,writable:!0})}catch(r){Kr[e]=t}return t},Yr=qr,Wr="__core-js_shared__",Xr=Ot[Wr]||Yr(Wr,{}),$r=Xr;(Br.exports=function(e,t){return $r[e]||($r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Qr=rr,Jr=Object,Zr=function(e){return Jr(Qr(e))},en=Zr,tn=zt({}.hasOwnProperty),rn=Object.hasOwn||function(e,t){return tn(en(e),t)},nn=zt,on=0,sn=Math.random(),an=nn(1..toString),un=function(e){return"Symbol("+(void 0===e?"":e)+")_"+an(++on+sn,36)},cn=Ot,fn=Br.exports,ln=rn,pn=un,dn=Nr,hn=Or,vn=fn("wks"),yn=cn.Symbol,gn=yn&&yn.for,mn=hn?yn:yn&&yn.withoutSetter||pn,wn=function(e){if(!ln(vn,e)||!dn&&"string"!=typeof vn[e]){var t="Symbol."+e;dn&&ln(yn,e)?vn[e]=yn[e]:vn[e]=hn&&gn?gn(t):mn(t)}return vn[e]},En=xt,Tn=ur,bn=Cr,In=Fr,Nn=function(e,t){var r,n;if("string"===t&&Vr(r=e.toString)&&!Gr(n=jr(r,e)))return n;if(Vr(r=e.valueOf)&&!Gr(n=jr(r,e)))return n;if("string"!==t&&Vr(r=e.toString)&&!Gr(n=jr(r,e)))return n;throw Hr("Can't convert object to primitive value")},On=TypeError,_n=wn("toPrimitive"),Rn=function(e,t){if(!Tn(e)||bn(e))return e;var r,n=In(e,_n);if(n){if(void 0===t&&(t="default"),r=En(n,e,t),!Tn(r)||bn(r))return r;throw On("Can't convert object to primitive value")}return void 0===t&&(t="number"),Nn(e,t)},An=Cr,Sn=function(e){var t=Rn(e,"string");return An(t)?t:t+""},Cn=ur,kn=Ot.document,xn=Cn(kn)&&Cn(kn.createElement),Mn=function(e){return xn?kn.createElement(e):{}},Pn=Mn,Un=!At&&!Rt((function(){return 7!=Object.defineProperty(Pn("div"),"a",{get:function(){return 7}}).a})),Dn=At,Ln=xt,Fn=Mt,jn=jt,Vn=or,Gn=Sn,Hn=rn,Bn=Un,Kn=Object.getOwnPropertyDescriptor;_t.f=Dn?Kn:function(e,t){if(e=Vn(e),t=Gn(t),Bn)try{return Kn(e,t)}catch(e){}if(Hn(e,t))return jn(!Ln(Fn.f,e,t),e[t])};var zn={},qn=At&&Rt((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Yn=ur,Wn=String,Xn=TypeError,$n=function(e){if(Yn(e))return e;throw Xn(Wn(e)+" is not an object")},Qn=At,Jn=Un,Zn=qn,ei=$n,ti=Sn,ri=TypeError,ni=Object.defineProperty,ii=Object.getOwnPropertyDescriptor,oi="enumerable",si="configurable",ai="writable";zn.f=Qn?Zn?function(e,t,r){if(ei(e),t=ti(t),ei(r),"function"==typeof e&&"prototype"===t&&"value"in r&&ai in r&&!r.writable){var n=ii(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:si in r?r.configurable:n.configurable,enumerable:oi in r?r.enumerable:n.enumerable,writable:!1})}return ni(e,t,r)}:ni:function(e,t,r){if(ei(e),t=ti(t),ei(r),Jn)try{return ni(e,t,r)}catch(e){}if("get"in r||"set"in r)throw ri("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var ui=zn,ci=jt,fi=At?function(e,t,r){return ui.f(e,t,ci(1,r))}:function(e,t,r){return e[t]=r,e},li={exports:{}},pi=At,di=rn,hi=Function.prototype,vi=pi&&Object.getOwnPropertyDescriptor,yi=di(hi,"name"),gi={EXISTS:yi,PROPER:yi&&"something"===function(){}.name,CONFIGURABLE:yi&&(!pi||pi&&vi(hi,"name").configurable)},mi=sr,wi=Xr,Ei=zt(Function.toString);mi(wi.inspectSource)||(wi.inspectSource=function(e){return Ei(e)});var Ti,bi,Ii,Ni=wi.inspectSource,Oi=sr,_i=Ni,Ri=Ot.WeakMap,Ai=Oi(Ri)&&/native code/.test(_i(Ri)),Si=Br.exports,Ci=un,ki=Si("keys"),xi=function(e){return ki[e]||(ki[e]=Ci(e))},Mi={},Pi=Ai,Ui=Ot,Di=zt,Li=ur,Fi=fi,ji=rn,Vi=Xr,Gi=xi,Hi=Mi,Bi="Object already initialized",Ki=Ui.TypeError,zi=Ui.WeakMap;if(Pi||Vi.state){var qi=Vi.state||(Vi.state=new zi),Yi=Di(qi.get),Wi=Di(qi.has),Xi=Di(qi.set);Ti=function(e,t){if(Wi(qi,e))throw new Ki(Bi);return t.facade=e,Xi(qi,e,t),t},bi=function(e){return Yi(qi,e)||{}},Ii=function(e){return Wi(qi,e)}}else{var $i=Gi("state");Hi[$i]=!0,Ti=function(e,t){if(ji(e,$i))throw new Ki(Bi);return t.facade=e,Fi(e,$i,t),t},bi=function(e){return ji(e,$i)?e[$i]:{}},Ii=function(e){return ji(e,$i)}}var Qi={set:Ti,get:bi,has:Ii,enforce:function(e){return Ii(e)?bi(e):Ti(e,{})},getterFor:function(e){return function(t){var r;if(!Li(t)||(r=bi(t)).type!==e)throw Ki("Incompatible receiver, "+e+" required");return r}}},Ji=Rt,Zi=sr,eo=rn,to=At,ro=gi.CONFIGURABLE,no=Ni,io=Qi.enforce,oo=Qi.get,so=Object.defineProperty,ao=to&&!Ji((function(){return 8!==so((function(){}),"length",{value:8}).length})),uo=String(String).split("String"),co=li.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!eo(e,"name")||ro&&e.name!==t)&&(to?so(e,"name",{value:t,configurable:!0}):e.name=t),ao&&r&&eo(r,"arity")&&e.length!==r.arity&&so(e,"length",{value:r.arity});try{r&&eo(r,"constructor")&&r.constructor?to&&so(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=io(e);return eo(n,"source")||(n.source=uo.join("string"==typeof t?t:"")),e};Function.prototype.toString=co((function(){return Zi(this)&&oo(this).source||no(this)}),"toString");var fo=sr,lo=zn,po=li.exports,ho=qr,vo=function(e,t,r,n){n||(n={});var i=n.enumerable,o=void 0!==n.name?n.name:t;if(fo(r)&&po(r,o,n),n.global)i?e[t]=r:ho(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=r:lo.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},yo={},go=Math.ceil,mo=Math.floor,wo=Math.trunc||function(e){var t=+e;return(t>0?mo:go)(t)},Eo=function(e){var t=+e;return t!=t||0===t?0:wo(t)},To=Eo,bo=Math.max,Io=Math.min,No=function(e,t){var r=To(e);return r<0?bo(r+t,0):Io(r,t)},Oo=Eo,_o=Math.min,Ro=function(e){return e>0?_o(Oo(e),9007199254740991):0},Ao=function(e){return Ro(e.length)},So=or,Co=No,ko=Ao,xo=function(e){return function(t,r,n){var i,o=So(t),s=ko(o),a=Co(n,s);if(e&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}},Mo={includes:xo(!0),indexOf:xo(!1)},Po=rn,Uo=or,Do=Mo.indexOf,Lo=Mi,Fo=zt([].push),jo=function(e,t){var r,n=Uo(e),i=0,o=[];for(r in n)!Po(Lo,r)&&Po(n,r)&&Fo(o,r);for(;t.length>i;)Po(n,r=t[i++])&&(~Do(o,r)||Fo(o,r));return o},Vo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Go=jo,Ho=Vo.concat("length","prototype");yo.f=Object.getOwnPropertyNames||function(e){return Go(e,Ho)};var Bo={};Bo.f=Object.getOwnPropertySymbols;var Ko=pr,zo=yo,qo=Bo,Yo=$n,Wo=zt([].concat),Xo=Ko("Reflect","ownKeys")||function(e){var t=zo.f(Yo(e)),r=qo.f;return r?Wo(t,r(e)):t},$o=rn,Qo=Xo,Jo=_t,Zo=zn,es=function(e,t,r){for(var n=Qo(t),i=Zo.f,o=Jo.f,s=0;s<n.length;s++){var a=n[s];$o(e,a)||r&&$o(r,a)||i(e,a,o(t,a))}},ts=Rt,rs=sr,ns=/#|\.prototype\./,is=function(e,t){var r=ss[os(e)];return r==us||r!=as&&(rs(t)?ts(t):!!t)},os=is.normalize=function(e){return String(e).replace(ns,".").toLowerCase()},ss=is.data={},as=is.NATIVE="N",us=is.POLYFILL="P",cs=is,fs=Ot,ls=_t.f,ps=fi,ds=vo,hs=qr,vs=es,ys=cs,gs=function(e,t){var r,n,i,o,s,a=e.target,u=e.global,c=e.stat;if(r=u?fs:c?fs[a]||hs(a,{}):(fs[a]||{}).prototype)for(n in t){if(o=t[n],i=e.dontCallGetSet?(s=ls(r,n))&&s.value:r[n],!ys(u?n:a+(c?".":"#")+n,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;vs(o,i)}(e.sham||i&&i.sham)&&ps(o,"sham",!0),ds(r,n,o,e)}},ms=!Rt((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ws=rn,Es=sr,Ts=Zr,bs=ms,Is=xi("IE_PROTO"),Ns=Object,Os=Ns.prototype,_s=bs?Ns.getPrototypeOf:function(e){var t=Ts(e);if(ws(t,Is))return t[Is];var r=t.constructor;return Es(r)&&t instanceof r?r.prototype:t instanceof Ns?Os:null},Rs=sr,As=String,Ss=TypeError,Cs=zt,ks=$n,xs=function(e){if("object"==typeof e||Rs(e))return e;throw Ss("Can't set "+As(e)+" as a prototype")},Ms=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Cs(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return ks(r),xs(n),t?e(r,n):r.__proto__=n,r}}():void 0),Ps={},Us=jo,Ds=Vo,Ls=Object.keys||function(e){return Us(e,Ds)},Fs=At,js=qn,Vs=zn,Gs=$n,Hs=or,Bs=Ls;Ps.f=Fs&&!js?Object.defineProperties:function(e,t){Gs(e);for(var r,n=Hs(t),i=Bs(t),o=i.length,s=0;o>s;)Vs.f(e,r=i[s++],n[r]);return e};var Ks,zs=pr("document","documentElement"),qs=$n,Ys=Ps,Ws=Vo,Xs=Mi,$s=zs,Qs=Mn,Js=xi("IE_PROTO"),Zs=function(){},ea=function(e){return"<script>"+e+"</"+"script>"},ta=function(e){e.write(ea("")),e.close();var t=e.parentWindow.Object;return e=null,t},ra=function(){try{Ks=new ActiveXObject("htmlfile")}catch(e){}var e,t;ra="undefined"!=typeof document?document.domain&&Ks?ta(Ks):((t=Qs("iframe")).style.display="none",$s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ea("document.F=Object")),e.close(),e.F):ta(Ks);for(var r=Ws.length;r--;)delete ra.prototype[Ws[r]];return ra()};Xs[Js]=!0;var na=Object.create||function(e,t){var r;return null!==e?(Zs.prototype=qs(e),r=new Zs,Zs.prototype=null,r[Js]=e):r=ra(),void 0===t?r:Ys.f(r,t)},ia=Error,oa=zt("".replace),sa=String(ia("zxcasd").stack),aa=/\n\s*at [^:]*:[^\n]*/,ua=aa.test(sa),ca=ur,fa=fi,la=Dr,pa=St,da=zt(zt.bind),ha=function(e,t){return la(e),void 0===t?e:pa?da(e,t):function(){return e.apply(t,arguments)}},va={},ya=va,ga=wn("iterator"),ma=Array.prototype,wa=function(e){return void 0!==e&&(ya.Array===e||ma[ga]===e)},Ea={};Ea[wn("toStringTag")]="z";var Ta="[object z]"===String(Ea),ba=Ta,Ia=sr,Na=Xt,Oa=wn("toStringTag"),_a=Object,Ra="Arguments"==Na(function(){return arguments}()),Aa=ba?Na:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=_a(e),Oa))?r:Ra?Na(t):"Object"==(n=Na(t))&&Ia(t.callee)?"Arguments":n},Sa=Aa,Ca=Fr,ka=va,xa=wn("iterator"),Ma=function(e){if(null!=e)return Ca(e,xa)||Ca(e,"@@iterator")||ka[Sa(e)]},Pa=xt,Ua=Dr,Da=$n,La=xr,Fa=Ma,ja=TypeError,Va=function(e,t){var r=arguments.length<2?Fa(e):t;if(Ua(r))return Da(Pa(r,e));throw ja(La(e)+" is not iterable")},Ga=xt,Ha=$n,Ba=Fr,Ka=function(e,t,r){var n,i;Ha(e);try{if(!(n=Ba(e,"return"))){if("throw"===t)throw r;return r}n=Ga(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return Ha(n),r},za=ha,qa=xt,Ya=$n,Wa=xr,Xa=wa,$a=Ao,Qa=dr,Ja=Va,Za=Ma,eu=Ka,tu=TypeError,ru=function(e,t){this.stopped=e,this.result=t},nu=ru.prototype,iu=function(e,t,r){var n,i,o,s,a,u,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),v=za(t,f),y=function(e){return n&&eu(n,"normal",e),new ru(!0,e)},g=function(e){return l?(Ya(e),h?v(e[0],e[1],y):v(e[0],e[1])):h?v(e,y):v(e)};if(p)n=e.iterator;else if(d)n=e;else{if(!(i=Za(e)))throw tu(Wa(e)+" is not iterable");if(Xa(i)){for(o=0,s=$a(e);s>o;o++)if((a=g(e[o]))&&Qa(nu,a))return a;return new ru(!1)}n=Ja(e,i)}for(u=p?e.next:n.next;!(c=qa(u,n)).done;){try{a=g(c.value)}catch(e){eu(n,"throw",e)}if("object"==typeof a&&a&&Qa(nu,a))return a}return new ru(!1)},ou=Aa,su=String,au=function(e){if("Symbol"===ou(e))throw TypeError("Cannot convert a Symbol value to a string");return su(e)},uu=au,cu=jt,fu=!Rt((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",cu(1,7)),7!==e.stack)})),lu=gs,pu=dr,du=_s,hu=Ms,vu=es,yu=na,gu=fi,mu=jt,wu=function(e,t){if(ua&&"string"==typeof e&&!ia.prepareStackTrace)for(;t--;)e=oa(e,aa,"");return e},Eu=function(e,t){ca(t)&&"cause"in t&&fa(e,"cause",t.cause)},Tu=iu,bu=function(e,t){return void 0===e?arguments.length<2?"":t:uu(e)},Iu=fu,Nu=wn("toStringTag"),Ou=Error,_u=[].push,Ru=function(e,t){var r,n=arguments.length>2?arguments[2]:void 0,i=pu(Au,this);hu?r=hu(new Ou,i?du(this):Au):(r=i?this:yu(Au),gu(r,Nu,"Error")),void 0!==t&&gu(r,"message",bu(t)),Iu&&gu(r,"stack",wu(r.stack,1)),Eu(r,n);var o=[];return Tu(e,_u,{that:o}),gu(r,"errors",o),r};hu?hu(Ru,Ou):vu(Ru,Ou,{name:!0});var Au=Ru.prototype=yu(Ou.prototype,{constructor:mu(1,Ru),message:mu(1,""),name:mu(1,"AggregateError")});lu({global:!0,constructor:!0,arity:2},{AggregateError:Ru});var Su=wn,Cu=na,ku=zn.f,xu=Su("unscopables"),Mu=Array.prototype;null==Mu[xu]&&ku(Mu,xu,{configurable:!0,value:Cu(null)});var Pu,Uu,Du,Lu=function(e){Mu[xu][e]=!0},Fu=Rt,ju=sr,Vu=_s,Gu=vo,Hu=wn("iterator"),Bu=!1;[].keys&&("next"in(Du=[].keys())?(Uu=Vu(Vu(Du)))!==Object.prototype&&(Pu=Uu):Bu=!0);var Ku=null==Pu||Fu((function(){var e={};return Pu[Hu].call(e)!==e}));Ku&&(Pu={}),ju(Pu[Hu])||Gu(Pu,Hu,(function(){return this}));var zu={IteratorPrototype:Pu,BUGGY_SAFARI_ITERATORS:Bu},qu=zn.f,Yu=rn,Wu=wn("toStringTag"),Xu=function(e,t,r){e&&!r&&(e=e.prototype),e&&!Yu(e,Wu)&&qu(e,Wu,{configurable:!0,value:t})},$u=zu.IteratorPrototype,Qu=na,Ju=jt,Zu=Xu,ec=va,tc=function(){return this},rc=gs,nc=xt,ic=sr,oc=function(e,t,r,n){var i=t+" Iterator";return e.prototype=Qu($u,{next:Ju(+!n,r)}),Zu(e,i,!1),ec[i]=tc,e},sc=_s,ac=Ms,uc=Xu,cc=fi,fc=vo,lc=va,pc=gi.PROPER,dc=gi.CONFIGURABLE,hc=zu.IteratorPrototype,vc=zu.BUGGY_SAFARI_ITERATORS,yc=wn("iterator"),gc="keys",mc="values",wc="entries",Ec=function(){return this},Tc=function(e,t,r,n,i,o,s){oc(r,t,n);var a,u,c,f=function(e){if(e===i&&v)return v;if(!vc&&e in d)return d[e];switch(e){case gc:case mc:case wc:return function(){return new r(this,e)}}return function(){return new r(this)}},l=t+" Iterator",p=!1,d=e.prototype,h=d[yc]||d["@@iterator"]||i&&d[i],v=!vc&&h||f(i),y="Array"==t&&d.entries||h;if(y&&(a=sc(y.call(new e)))!==Object.prototype&&a.next&&(sc(a)!==hc&&(ac?ac(a,hc):ic(a[yc])||fc(a,yc,Ec)),uc(a,l,!0)),pc&&i==mc&&h&&h.name!==mc&&(dc?cc(d,"name",mc):(p=!0,v=function(){return nc(h,this)})),i)if(u={values:f(mc),keys:o?v:f(gc),entries:f(wc)},s)for(c in u)(vc||p||!(c in d))&&fc(d,c,u[c]);else rc({target:t,proto:!0,forced:vc||p},u);return d[yc]!==v&&fc(d,yc,v,{name:i}),lc[t]=v,u},bc=or,Ic=Lu,Nc=va,Oc=Qi,_c=zn.f,Rc=Tc,Ac=At,Sc="Array Iterator",Cc=Oc.set,kc=Oc.getterFor(Sc),xc=Rc(Array,"Array",(function(e,t){Cc(this,{type:Sc,target:bc(e),index:0,kind:t})}),(function(){var e=kc(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),Mc=Nc.Arguments=Nc.Array;if(Ic("keys"),Ic("values"),Ic("entries"),Ac&&"values"!==Mc.name)try{_c(Mc,"name",{value:"values"})}catch(e){}var Pc=Aa,Uc=Ta?{}.toString:function(){return"[object "+Pc(this)+"]"};Ta||vo(Object.prototype,"toString",Uc,{unsafe:!0});var Dc="process"==Xt(Ot.process),Lc=pr,Fc=zn,jc=At,Vc=wn("species"),Gc=function(e){var t=Lc(e),r=Fc.f;jc&&t&&!t[Vc]&&r(t,Vc,{configurable:!0,get:function(){return this}})},Hc=dr,Bc=TypeError,Kc=function(e,t){if(Hc(t,e))return e;throw Bc("Incorrect invocation")},zc=zt,qc=Rt,Yc=sr,Wc=Aa,Xc=Ni,$c=function(){},Qc=[],Jc=pr("Reflect","construct"),Zc=/^\s*(?:class|function)\b/,ef=zc(Zc.exec),tf=!Zc.exec($c),rf=function(e){if(!Yc(e))return!1;try{return Jc($c,Qc,e),!0}catch(e){return!1}},nf=function(e){if(!Yc(e))return!1;switch(Wc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return tf||!!ef(Zc,Xc(e))}catch(e){return!0}};nf.sham=!0;var of,sf,af,uf,cf=!Jc||qc((function(){var e;return rf(rf.call)||!rf(Object)||!rf((function(){e=!0}))||e}))?nf:rf,ff=cf,lf=xr,pf=TypeError,df=$n,hf=function(e){if(ff(e))return e;throw pf(lf(e)+" is not a constructor")},vf=wn("species"),yf=function(e,t){var r,n=df(e).constructor;return void 0===n||null==(r=df(n)[vf])?t:hf(r)},gf=St,mf=Function.prototype,wf=mf.apply,Ef=mf.call,Tf="object"==typeof Reflect&&Reflect.apply||(gf?Ef.bind(wf):function(){return Ef.apply(wf,arguments)}),bf=zt([].slice),If=TypeError,Nf=/(?:ipad|iphone|ipod).*applewebkit/i.test(hr),Of=Ot,_f=Tf,Rf=ha,Af=sr,Sf=rn,Cf=Rt,kf=zs,xf=bf,Mf=Mn,Pf=function(e,t){if(e<t)throw If("Not enough arguments");return e},Uf=Nf,Df=Dc,Lf=Of.setImmediate,Ff=Of.clearImmediate,jf=Of.process,Vf=Of.Dispatch,Gf=Of.Function,Hf=Of.MessageChannel,Bf=Of.String,Kf=0,zf={},qf="onreadystatechange";try{of=Of.location}catch(e){}var Yf=function(e){if(Sf(zf,e)){var t=zf[e];delete zf[e],t()}},Wf=function(e){return function(){Yf(e)}},Xf=function(e){Yf(e.data)},$f=function(e){Of.postMessage(Bf(e),of.protocol+"//"+of.host)};Lf&&Ff||(Lf=function(e){Pf(arguments.length,1);var t=Af(e)?e:Gf(e),r=xf(arguments,1);return zf[++Kf]=function(){_f(t,void 0,r)},sf(Kf),Kf},Ff=function(e){delete zf[e]},Df?sf=function(e){jf.nextTick(Wf(e))}:Vf&&Vf.now?sf=function(e){Vf.now(Wf(e))}:Hf&&!Uf?(uf=(af=new Hf).port2,af.port1.onmessage=Xf,sf=Rf(uf.postMessage,uf)):Of.addEventListener&&Af(Of.postMessage)&&!Of.importScripts&&of&&"file:"!==of.protocol&&!Cf($f)?(sf=$f,Of.addEventListener("message",Xf,!1)):sf=qf in Mf("script")?function(e){kf.appendChild(Mf("script")).onreadystatechange=function(){kf.removeChild(this),Yf(e)}}:function(e){setTimeout(Wf(e),0)});var Qf,Jf,Zf,el,tl,rl,nl,il,ol={set:Lf,clear:Ff},sl=Ot,al=/ipad|iphone|ipod/i.test(hr)&&void 0!==sl.Pebble,ul=/web0s(?!.*chrome)/i.test(hr),cl=Ot,fl=ha,ll=_t.f,pl=ol.set,dl=Nf,hl=al,vl=ul,yl=Dc,gl=cl.MutationObserver||cl.WebKitMutationObserver,ml=cl.document,wl=cl.process,El=cl.Promise,Tl=ll(cl,"queueMicrotask"),bl=Tl&&Tl.value;bl||(Qf=function(){var e,t;for(yl&&(e=wl.domain)&&e.exit();Jf;){t=Jf.fn,Jf=Jf.next;try{t()}catch(e){throw Jf?el():Zf=void 0,e}}Zf=void 0,e&&e.enter()},dl||yl||vl||!gl||!ml?!hl&&El&&El.resolve?((nl=El.resolve(void 0)).constructor=El,il=fl(nl.then,nl),el=function(){il(Qf)}):yl?el=function(){wl.nextTick(Qf)}:(pl=fl(pl,cl),el=function(){pl(Qf)}):(tl=!0,rl=ml.createTextNode(""),new gl(Qf).observe(rl,{characterData:!0}),el=function(){rl.data=tl=!tl}));var Il=bl||function(e){var t={fn:e,next:void 0};Zf&&(Zf.next=t),Jf||(Jf=t,el()),Zf=t},Nl=Ot,Ol=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},_l=function(){this.head=null,this.tail=null};_l.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Rl=_l,Al=Ot.Promise,Sl="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Cl=!Sl&&!Dc&&"object"==typeof window&&"object"==typeof document,kl=Ot,xl=Al,Ml=sr,Pl=cs,Ul=Ni,Dl=wn,Ll=Cl,Fl=Sl,jl=Tr;xl&&xl.prototype;var Vl=Dl("species"),Gl=!1,Hl=Ml(kl.PromiseRejectionEvent),Bl=Pl("Promise",(function(){var e=Ul(xl),t=e!==String(xl);if(!t&&66===jl)return!0;if(!jl||jl<51||!/native code/.test(e)){var r=new xl((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[Vl]=n,!(Gl=r.then((function(){}))instanceof n))return!0}return!t&&(Ll||Fl)&&!Hl})),Kl={CONSTRUCTOR:Bl,REJECTION_EVENT:Hl,SUBCLASSING:Gl},zl={},ql=Dr,Yl=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=ql(t),this.reject=ql(r)};zl.f=function(e){return new Yl(e)};var Wl,Xl,$l,Ql=gs,Jl=Dc,Zl=Ot,ep=xt,tp=vo,rp=Ms,np=Xu,ip=Gc,op=Dr,sp=sr,ap=ur,up=Kc,cp=yf,fp=ol.set,lp=Il,pp=function(e,t){var r=Nl.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))},dp=Ol,hp=Rl,vp=Qi,yp=Al,gp=zl,mp="Promise",wp=Kl.CONSTRUCTOR,Ep=Kl.REJECTION_EVENT,Tp=Kl.SUBCLASSING,bp=vp.getterFor(mp),Ip=vp.set,Np=yp&&yp.prototype,Op=yp,_p=Np,Rp=Zl.TypeError,Ap=Zl.document,Sp=Zl.process,Cp=gp.f,kp=Cp,xp=!!(Ap&&Ap.createEvent&&Zl.dispatchEvent),Mp="unhandledrejection",Pp=function(e){var t;return!(!ap(e)||!sp(t=e.then))&&t},Up=function(e,t){var r,n,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,u=e.resolve,c=e.reject,f=e.domain;try{a?(s||(2===t.rejection&&Vp(t),t.rejection=1),!0===a?r=o:(f&&f.enter(),r=a(o),f&&(f.exit(),i=!0)),r===e.promise?c(Rp("Promise-chain cycle")):(n=Pp(r))?ep(n,r,u,c):u(r)):c(o)}catch(e){f&&!i&&f.exit(),c(e)}},Dp=function(e,t){e.notified||(e.notified=!0,lp((function(){for(var r,n=e.reactions;r=n.get();)Up(r,e);e.notified=!1,t&&!e.rejection&&Fp(e)})))},Lp=function(e,t,r){var n,i;xp?((n=Ap.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Zl.dispatchEvent(n)):n={promise:t,reason:r},!Ep&&(i=Zl["on"+e])?i(n):e===Mp&&pp("Unhandled promise rejection",r)},Fp=function(e){ep(fp,Zl,(function(){var t,r=e.facade,n=e.value;if(jp(e)&&(t=dp((function(){Jl?Sp.emit("unhandledRejection",n,r):Lp(Mp,r,n)})),e.rejection=Jl||jp(e)?2:1,t.error))throw t.value}))},jp=function(e){return 1!==e.rejection&&!e.parent},Vp=function(e){ep(fp,Zl,(function(){var t=e.facade;Jl?Sp.emit("rejectionHandled",t):Lp("rejectionhandled",t,e.value)}))},Gp=function(e,t,r){return function(n){e(t,n,r)}},Hp=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Dp(e,!0))},Bp=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Rp("Promise can't be resolved itself");var n=Pp(t);n?lp((function(){var r={done:!1};try{ep(n,t,Gp(Bp,r,e),Gp(Hp,r,e))}catch(t){Hp(r,t,e)}})):(e.value=t,e.state=1,Dp(e,!1))}catch(t){Hp({done:!1},t,e)}}};if(wp&&(_p=(Op=function(e){up(this,_p),op(e),ep(Wl,this);var t=bp(this);try{e(Gp(Bp,t),Gp(Hp,t))}catch(e){Hp(t,e)}}).prototype,(Wl=function(e){Ip(this,{type:mp,done:!1,notified:!1,parent:!1,reactions:new hp,rejection:!1,state:0,value:void 0})}).prototype=tp(_p,"then",(function(e,t){var r=bp(this),n=Cp(cp(this,Op));return r.parent=!0,n.ok=!sp(e)||e,n.fail=sp(t)&&t,n.domain=Jl?Sp.domain:void 0,0==r.state?r.reactions.add(n):lp((function(){Up(n,r)})),n.promise})),Xl=function(){var e=new Wl,t=bp(e);this.promise=e,this.resolve=Gp(Bp,t),this.reject=Gp(Hp,t)},gp.f=Cp=function(e){return e===Op||undefined===e?new Xl(e):kp(e)},sp(yp)&&Np!==Object.prototype)){$l=Np.then,Tp||tp(Np,"then",(function(e,t){var r=this;return new Op((function(e,t){ep($l,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete Np.constructor}catch(e){}rp&&rp(Np,_p)}Ql({global:!0,constructor:!0,wrap:!0,forced:wp},{Promise:Op}),np(Op,mp,!1),ip(mp);var Kp=wn("iterator"),zp=!1;try{var qp=0,Yp={next:function(){return{done:!!qp++}},return:function(){zp=!0}};Yp[Kp]=function(){return this},Array.from(Yp,(function(){throw 2}))}catch(e){}var Wp=function(e,t){if(!t&&!zp)return!1;var r=!1;try{var n={};n[Kp]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},Xp=Al,$p=Kl.CONSTRUCTOR||!Wp((function(e){Xp.all(e).then(void 0,(function(){}))})),Qp=xt,Jp=Dr,Zp=zl,ed=Ol,td=iu;gs({target:"Promise",stat:!0,forced:$p},{all:function(e){var t=this,r=Zp.f(t),n=r.resolve,i=r.reject,o=ed((function(){var r=Jp(t.resolve),o=[],s=0,a=1;td(e,(function(e){var u=s++,c=!1;a++,Qp(r,t,e).then((function(e){c||(c=!0,o[u]=e,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise}});var rd=gs,nd=Kl.CONSTRUCTOR,id=Al,od=pr,sd=sr,ad=vo,ud=id&&id.prototype;if(rd({target:"Promise",proto:!0,forced:nd,real:!0},{catch:function(e){return this.then(void 0,e)}}),sd(id)){var cd=od("Promise").prototype.catch;ud.catch!==cd&&ad(ud,"catch",cd,{unsafe:!0})}var fd=xt,ld=Dr,pd=zl,dd=Ol,hd=iu;gs({target:"Promise",stat:!0,forced:$p},{race:function(e){var t=this,r=pd.f(t),n=r.reject,i=dd((function(){var i=ld(t.resolve);hd(e,(function(e){fd(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var vd=xt,yd=zl;gs({target:"Promise",stat:!0,forced:Kl.CONSTRUCTOR},{reject:function(e){var t=yd.f(this);return vd(t.reject,void 0,e),t.promise}});var gd=$n,md=ur,wd=zl,Ed=function(e,t){if(gd(e),md(t)&&t.constructor===e)return t;var r=wd.f(e);return(0,r.resolve)(t),r.promise},Td=gs,bd=Kl.CONSTRUCTOR,Id=Ed;pr("Promise"),Td({target:"Promise",stat:!0,forced:bd},{resolve:function(e){return Id(this,e)}});var Nd=xt,Od=Dr,_d=zl,Rd=Ol,Ad=iu;gs({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=_d.f(t),n=r.resolve,i=r.reject,o=Rd((function(){var r=Od(t.resolve),i=[],o=0,s=1;Ad(e,(function(e){var a=o++,u=!1;s++,Nd(r,t,e).then((function(e){u||(u=!0,i[a]={status:"fulfilled",value:e},--s||n(i))}),(function(e){u||(u=!0,i[a]={status:"rejected",reason:e},--s||n(i))}))})),--s||n(i)}));return o.error&&i(o.value),r.promise}});var Sd=xt,Cd=Dr,kd=pr,xd=zl,Md=Ol,Pd=iu,Ud="No one promise resolved";gs({target:"Promise",stat:!0},{any:function(e){var t=this,r=kd("AggregateError"),n=xd.f(t),i=n.resolve,o=n.reject,s=Md((function(){var n=Cd(t.resolve),s=[],a=0,u=1,c=!1;Pd(e,(function(e){var f=a++,l=!1;u++,Sd(n,t,e).then((function(e){l||c||(c=!0,i(e))}),(function(e){l||c||(l=!0,s[f]=e,--u||o(new r(s,Ud)))}))})),--u||o(new r(s,Ud))}));return s.error&&o(s.value),n.promise}});var Dd=gs,Ld=Al,Fd=Rt,jd=pr,Vd=sr,Gd=yf,Hd=Ed,Bd=vo,Kd=Ld&&Ld.prototype;if(Dd({target:"Promise",proto:!0,real:!0,forced:!!Ld&&Fd((function(){Kd.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Gd(this,jd("Promise")),r=Vd(e);return this.then(r?function(r){return Hd(t,e()).then((function(){return r}))}:e,r?function(r){return Hd(t,e()).then((function(){throw r}))}:e)}}),Vd(Ld)){var zd=jd("Promise").prototype.finally;Kd.finally!==zd&&Bd(Kd,"finally",zd,{unsafe:!0})}var qd=zt,Yd=Eo,Wd=au,Xd=rr,$d=qd("".charAt),Qd=qd("".charCodeAt),Jd=qd("".slice),Zd=function(e){return function(t,r){var n,i,o=Wd(Xd(t)),s=Yd(r),a=o.length;return s<0||s>=a?e?"":void 0:(n=Qd(o,s))<55296||n>56319||s+1===a||(i=Qd(o,s+1))<56320||i>57343?e?$d(o,s):n:e?Jd(o,s,s+2):i-56320+(n-55296<<10)+65536}},eh={codeAt:Zd(!1),charAt:Zd(!0)}.charAt,th=au,rh=Qi,nh=Tc,ih="String Iterator",oh=rh.set,sh=rh.getterFor(ih);nh(String,"String",(function(e){oh(this,{type:ih,string:th(e),index:0})}),(function(){var e,t=sh(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=eh(r,n),t.index+=e.length,{value:e,done:!1})}));var ah=Ot,uh=ah.Promise,ch=Mn("span").classList,fh=ch&&ch.constructor&&ch.constructor.prototype,lh=fh===Object.prototype?void 0:fh,ph=Ot,dh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},hh=lh,vh=xc,yh=fi,gh=wn,mh=gh("iterator"),wh=gh("toStringTag"),Eh=vh.values,Th=function(e,t){if(e){if(e[mh]!==Eh)try{yh(e,mh,Eh)}catch(t){e[mh]=Eh}if(e[wh]||yh(e,wh,t),dh[t])for(var r in vh)if(e[r]!==vh[r])try{yh(e,r,vh[r])}catch(t){e[r]=vh[r]}}};for(var bh in dh)Th(ph[bh]&&ph[bh].prototype,bh);Th(hh,"DOMTokenList");var Ih=uh,Nh=zl,Oh=Ol;gs({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=Nh.f(this),r=Oh(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var _h=Ih;!function(e){e.exports=_h}({exports:{}});var Rh=$n,Ah=Ka,Sh=Sn,Ch=zn,kh=jt,xh=function(e,t,r){var n=Sh(t);n in e?Ch.f(e,n,kh(0,r)):e[n]=r},Mh=ha,Ph=xt,Uh=Zr,Dh=function(e,t,r,n){try{return n?t(Rh(r)[0],r[1]):t(r)}catch(t){Ah(e,"throw",t)}},Lh=wa,Fh=cf,jh=Ao,Vh=xh,Gh=Va,Hh=Ma,Bh=Array,Kh=function(e){var t=Uh(e),r=Fh(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=void 0!==i;o&&(i=Mh(i,n>2?arguments[2]:void 0));var s,a,u,c,f,l,p=Hh(t),d=0;if(!p||this===Bh&&Lh(p))for(s=jh(t),a=r?new this(s):Bh(s);s>d;d++)l=o?i(t[d],d):t[d],Vh(a,d,l);else for(f=(c=Gh(t,p)).next,a=r?new this:[];!(u=Ph(f,c)).done;d++)l=o?Dh(c,i,[u.value,d],!0):u.value,Vh(a,d,l);return a.length=d,a};gs({target:"Array",stat:!0,forced:!Wp((function(e){Array.from(e)}))},{from:Kh});var zh=Xt,qh=Array.isArray||function(e){return"Array"==zh(e)};gs({target:"Array",stat:!0},{isArray:qh});var Yh=cf,Wh=xh,Xh=Array;gs({target:"Array",stat:!0,forced:Rt((function(){function e(){}return!(Xh.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,r=new(Yh(this)?this:Xh)(t);t>e;)Wh(r,e,arguments[e++]);return r.length=t,r}});var $h=Zr,Qh=Ao,Jh=Eo,Zh=Lu;gs({target:"Array",proto:!0},{at:function(e){var t=$h(this),r=Qh(t),n=Jh(e),i=n>=0?n:r+n;return i<0||i>=r?void 0:t[i]}}),Zh("at");var ev=TypeError,tv=function(e){if(e>9007199254740991)throw ev("Maximum allowed index exceeded");return e},rv=qh,nv=cf,iv=ur,ov=wn("species"),sv=Array,av=function(e){var t;return rv(e)&&(t=e.constructor,(nv(t)&&(t===sv||rv(t.prototype))||iv(t)&&null===(t=t[ov]))&&(t=void 0)),void 0===t?sv:t},uv=function(e,t){return new(av(e))(0===t?0:t)},cv=Rt,fv=Tr,lv=wn("species"),pv=function(e){return fv>=51||!cv((function(){var t=[];return(t.constructor={})[lv]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},dv=gs,hv=Rt,vv=qh,yv=ur,gv=Zr,mv=Ao,wv=tv,Ev=xh,Tv=uv,bv=pv,Iv=Tr,Nv=wn("isConcatSpreadable"),Ov=Iv>=51||!hv((function(){var e=[];return e[Nv]=!1,e.concat()[0]!==e})),_v=bv("concat"),Rv=function(e){if(!yv(e))return!1;var t=e[Nv];return void 0!==t?!!t:vv(e)};dv({target:"Array",proto:!0,arity:1,forced:!Ov||!_v},{concat:function(e){var t,r,n,i,o,s=gv(this),a=Tv(s,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(Rv(o=-1===t?s:arguments[t]))for(i=mv(o),wv(u+i),r=0;r<i;r++,u++)r in o&&Ev(a,u,o[r]);else wv(u+1),Ev(a,u++,o);return a.length=u,a}});var Av=xr,Sv=TypeError,Cv=function(e,t){if(!delete e[t])throw Sv("Cannot delete property "+Av(t)+" of "+Av(e))},kv=Zr,xv=No,Mv=Ao,Pv=Cv,Uv=Math.min,Dv=[].copyWithin||function(e,t){var r=kv(this),n=Mv(r),i=xv(e,n),o=xv(t,n),s=arguments.length>2?arguments[2]:void 0,a=Uv((void 0===s?n:xv(s,n))-o,n-i),u=1;for(o<i&&i<o+a&&(u=-1,o+=a-1,i+=a-1);a-- >0;)o in r?r[i]=r[o]:Pv(r,i),i+=u,o+=u;return r},Lv=Lu;gs({target:"Array",proto:!0},{copyWithin:Dv}),Lv("copyWithin");var Fv=ha,jv=er,Vv=Zr,Gv=Ao,Hv=uv,Bv=zt([].push),Kv=function(e){var t=1==e,r=2==e,n=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(u,c,f,l){for(var p,d,h=Vv(u),v=jv(h),y=Fv(c,f),g=Gv(v),m=0,w=l||Hv,E=t?w(u,g):r||s?w(u,0):void 0;g>m;m++)if((a||m in v)&&(d=y(p=v[m],m,h),e))if(t)E[m]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return m;case 2:Bv(E,p)}else switch(e){case 4:return!1;case 7:Bv(E,p)}return o?-1:n||i?i:E}},zv={forEach:Kv(0),map:Kv(1),filter:Kv(2),some:Kv(3),every:Kv(4),find:Kv(5),findIndex:Kv(6),filterReject:Kv(7)},qv=Rt,Yv=function(e,t){var r=[][e];return!!r&&qv((function(){r.call(null,t||function(){return 1},1)}))},Wv=zv.every;gs({target:"Array",proto:!0,forced:!Yv("every")},{every:function(e){return Wv(this,e,arguments.length>1?arguments[1]:void 0)}});var Xv=Zr,$v=No,Qv=Ao,Jv=function(e){for(var t=Xv(this),r=Qv(t),n=arguments.length,i=$v(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,s=void 0===o?r:$v(o,r);s>i;)t[i++]=e;return t},Zv=Lu;gs({target:"Array",proto:!0},{fill:Jv}),Zv("fill");var ey=zv.filter;gs({target:"Array",proto:!0,forced:!pv("filter")},{filter:function(e){return ey(this,e,arguments.length>1?arguments[1]:void 0)}});var ty=gs,ry=zv.find,ny=Lu,iy="find",oy=!0;iy in[]&&Array(1).find((function(){oy=!1})),ty({target:"Array",proto:!0,forced:oy},{find:function(e){return ry(this,e,arguments.length>1?arguments[1]:void 0)}}),ny(iy);var sy=gs,ay=zv.findIndex,uy=Lu,cy="findIndex",fy=!0;cy in[]&&Array(1).findIndex((function(){fy=!1})),sy({target:"Array",proto:!0,forced:fy},{findIndex:function(e){return ay(this,e,arguments.length>1?arguments[1]:void 0)}}),uy(cy);var ly=ha,py=er,dy=Zr,hy=Ao,vy=function(e){var t=1==e;return function(r,n,i){for(var o,s=dy(r),a=py(s),u=ly(n,i),c=hy(a);c-- >0;)if(u(o=a[c],c,s))switch(e){case 0:return o;case 1:return c}return t?-1:void 0}},yy={findLast:vy(0),findLastIndex:vy(1)},gy=yy.findLast,my=Lu;gs({target:"Array",proto:!0},{findLast:function(e){return gy(this,e,arguments.length>1?arguments[1]:void 0)}}),my("findLast");var wy=yy.findLastIndex,Ey=Lu;gs({target:"Array",proto:!0},{findLastIndex:function(e){return wy(this,e,arguments.length>1?arguments[1]:void 0)}}),Ey("findLastIndex");var Ty=qh,by=Ao,Iy=tv,Ny=ha,Oy=function(e,t,r,n,i,o,s,a){for(var u,c,f=i,l=0,p=!!s&&Ny(s,a);l<n;)l in r&&(u=p?p(r[l],l,t):r[l],o>0&&Ty(u)?(c=by(u),f=Oy(e,t,u,c,f,o-1)-1):(Iy(f+1),e[f]=u),f++),l++;return f},_y=Oy,Ry=_y,Ay=Zr,Sy=Ao,Cy=Eo,ky=uv;gs({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Ay(this),r=Sy(t),n=ky(t,0);return n.length=Ry(n,t,t,r,0,void 0===e?1:Cy(e)),n}});var xy=_y,My=Dr,Py=Zr,Uy=Ao,Dy=uv;gs({target:"Array",proto:!0},{flatMap:function(e){var t,r=Py(this),n=Uy(r);return My(e),(t=Dy(r,0)).length=xy(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var Ly=zv.forEach,Fy=Yv("forEach")?[].forEach:function(e){return Ly(this,e,arguments.length>1?arguments[1]:void 0)};gs({target:"Array",proto:!0,forced:[].forEach!=Fy},{forEach:Fy});var jy=Mo.includes,Vy=Lu;gs({target:"Array",proto:!0,forced:Rt((function(){return!Array(1).includes()}))},{includes:function(e){return jy(this,e,arguments.length>1?arguments[1]:void 0)}}),Vy("includes");var Gy=gs,Hy=Mo.indexOf,By=Yv,Ky=zt([].indexOf),zy=!!Ky&&1/Ky([1],1,-0)<0,qy=By("indexOf");Gy({target:"Array",proto:!0,forced:zy||!qy},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return zy?Ky(this,e,t)||0:Hy(this,e,t)}});var Yy=gs,Wy=er,Xy=or,$y=Yv,Qy=zt([].join),Jy=Wy!=Object,Zy=$y("join",",");Yy({target:"Array",proto:!0,forced:Jy||!Zy},{join:function(e){return Qy(Xy(this),void 0===e?",":e)}});var eg=Tf,tg=or,rg=Eo,ng=Ao,ig=Yv,og=Math.min,sg=[].lastIndexOf,ag=!!sg&&1/[1].lastIndexOf(1,-0)<0,ug=ig("lastIndexOf"),cg=ag||!ug?function(e){if(ag)return eg(sg,this,arguments)||0;var t=tg(this),r=ng(t),n=r-1;for(arguments.length>1&&(n=og(n,rg(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}:sg;gs({target:"Array",proto:!0,forced:cg!==[].lastIndexOf},{lastIndexOf:cg});var fg=zv.map;gs({target:"Array",proto:!0,forced:!pv("map")},{map:function(e){return fg(this,e,arguments.length>1?arguments[1]:void 0)}});var lg=gs,pg=Zr,dg=Ao,hg=tv,vg=Rt((function(){return 4294967297!==[].push.call({length:4294967296},1)})),yg=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();lg({target:"Array",proto:!0,arity:1,forced:vg||yg},{push:function(e){var t=pg(this),r=dg(t),n=arguments.length;hg(r+n);for(var i=0;i<n;i++)t[r]=arguments[i],r++;return t.length=r,r}});var gg=Dr,mg=Zr,wg=er,Eg=Ao,Tg=TypeError,bg=function(e){return function(t,r,n,i){gg(r);var o=mg(t),s=wg(o),a=Eg(o),u=e?a-1:0,c=e?-1:1;if(n<2)for(;;){if(u in s){i=s[u],u+=c;break}if(u+=c,e?u<0:a<=u)throw Tg("Reduce of empty array with no initial value")}for(;e?u>=0:a>u;u+=c)u in s&&(i=r(i,s[u],u,o));return i}},Ig={left:bg(!1),right:bg(!0)},Ng=Ig.left,Og=Tr,_g=Dc;gs({target:"Array",proto:!0,forced:!Yv("reduce")||!_g&&Og>79&&Og<83},{reduce:function(e){var t=arguments.length;return Ng(this,e,t,t>1?arguments[1]:void 0)}});var Rg=Ig.right,Ag=Tr,Sg=Dc;gs({target:"Array",proto:!0,forced:!Yv("reduceRight")||!Sg&&Ag>79&&Ag<83},{reduceRight:function(e){return Rg(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Cg=gs,kg=qh,xg=zt([].reverse),Mg=[1,2];Cg({target:"Array",proto:!0,forced:String(Mg)===String(Mg.reverse())},{reverse:function(){return kg(this)&&(this.length=this.length),xg(this)}});var Pg=gs,Ug=qh,Dg=cf,Lg=ur,Fg=No,jg=Ao,Vg=or,Gg=xh,Hg=wn,Bg=bf,Kg=pv("slice"),zg=Hg("species"),qg=Array,Yg=Math.max;Pg({target:"Array",proto:!0,forced:!Kg},{slice:function(e,t){var r,n,i,o=Vg(this),s=jg(o),a=Fg(e,s),u=Fg(void 0===t?s:t,s);if(Ug(o)&&(r=o.constructor,(Dg(r)&&(r===qg||Ug(r.prototype))||Lg(r)&&null===(r=r[zg]))&&(r=void 0),r===qg||void 0===r))return Bg(o,a,u);for(n=new(void 0===r?qg:r)(Yg(u-a,0)),i=0;a<u;a++,i++)a in o&&Gg(n,i,o[a]);return n.length=i,n}});var Wg=zv.some;gs({target:"Array",proto:!0,forced:!Yv("some")},{some:function(e){return Wg(this,e,arguments.length>1?arguments[1]:void 0)}});var Xg=No,$g=Ao,Qg=xh,Jg=Array,Zg=Math.max,em=function(e,t,r){for(var n=$g(e),i=Xg(t,n),o=Xg(void 0===r?n:r,n),s=Jg(Zg(o-i,0)),a=0;i<o;i++,a++)Qg(s,a,e[i]);return s.length=a,s},tm=em,rm=Math.floor,nm=function(e,t){var r=e.length,n=rm(r/2);return r<8?im(e,t):om(e,nm(tm(e,0,n),t),nm(tm(e,n),t),t)},im=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},om=function(e,t,r,n){for(var i=t.length,o=r.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?n(t[s],r[a])<=0?t[s++]:r[a++]:s<i?t[s++]:r[a++];return e},sm=nm,am=hr.match(/firefox\/(\d+)/i),um=!!am&&+am[1],cm=/MSIE|Trident/.test(hr),fm=hr.match(/AppleWebKit\/(\d+)\./),lm=!!fm&&+fm[1],pm=gs,dm=zt,hm=Dr,vm=Zr,ym=Ao,gm=Cv,mm=au,wm=Rt,Em=sm,Tm=Yv,bm=um,Im=cm,Nm=Tr,Om=lm,_m=[],Rm=dm(_m.sort),Am=dm(_m.push),Sm=wm((function(){_m.sort(void 0)})),Cm=wm((function(){_m.sort(null)})),km=Tm("sort"),xm=!wm((function(){if(Nm)return Nm<70;if(!(bm&&bm>3)){if(Im)return!0;if(Om)return Om<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)_m.push({k:t+n,v:r})}for(_m.sort((function(e,t){return t.v-e.v})),n=0;n<_m.length;n++)t=_m[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));pm({target:"Array",proto:!0,forced:Sm||!Cm||!km||!xm},{sort:function(e){void 0!==e&&hm(e);var t=vm(this);if(xm)return void 0===e?Rm(t):Rm(t,e);var r,n,i=[],o=ym(t);for(n=0;n<o;n++)n in t&&Am(i,t[n]);for(Em(i,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:mm(t)>mm(r)?1:-1}}(e)),r=i.length,n=0;n<r;)t[n]=i[n++];for(;n<o;)gm(t,n++);return t}}),Gc("Array");var Mm=gs,Pm=Zr,Um=No,Dm=Eo,Lm=Ao,Fm=tv,jm=uv,Vm=xh,Gm=Cv,Hm=pv("splice"),Bm=Math.max,Km=Math.min;Mm({target:"Array",proto:!0,forced:!Hm},{splice:function(e,t){var r,n,i,o,s,a,u=Pm(this),c=Lm(u),f=Um(e,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=Km(Bm(Dm(t),0),c-f)),Fm(c+r-n),i=jm(u,n),o=0;o<n;o++)(s=f+o)in u&&Vm(i,o,u[s]);if(i.length=n,r<n){for(o=f;o<c-n;o++)a=o+r,(s=o+n)in u?u[a]=u[s]:Gm(u,a);for(o=c;o>c-n+r;o--)Gm(u,o-1)}else if(r>n)for(o=c-n;o>f;o--)a=o+r-1,(s=o+n-1)in u?u[a]=u[s]:Gm(u,a);for(o=0;o<r;o++)u[o+f]=arguments[o+2];return u.length=c-n+r,i}}),Lu("flat"),Lu("flatMap");var zm=gs,qm=Zr,Ym=Ao,Wm=Cv,Xm=tv,$m=1!==[].unshift(0),Qm=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();zm({target:"Array",proto:!0,arity:1,forced:$m||Qm},{unshift:function(e){var t=qm(this),r=Ym(t),n=arguments.length;if(n){Xm(r+n);for(var i=r;i--;){var o=i+n;i in t?t[o]=t[i]:Wm(t,o)}for(var s=0;s<n;s++)t[s]=arguments[s]}return t.length=r+n}});var Jm=ah.Array,Zm={exports:{}},ew={},tw=Xt,rw=or,nw=yo.f,iw=em,ow="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ew.f=function(e){return ow&&"Window"==tw(e)?function(e){try{return nw(e)}catch(e){return iw(ow)}}(e):nw(rw(e))};var sw=Rt((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),aw=Rt,uw=ur,cw=Xt,fw=sw,lw=Object.isExtensible,pw=aw((function(){lw(1)}))||fw?function(e){return!!uw(e)&&((!fw||"ArrayBuffer"!=cw(e))&&(!lw||lw(e)))}:lw,dw=!Rt((function(){return Object.isExtensible(Object.preventExtensions({}))})),hw=gs,vw=zt,yw=Mi,gw=ur,mw=rn,ww=zn.f,Ew=yo,Tw=ew,bw=pw,Iw=dw,Nw=!1,Ow=un("meta"),_w=0,Rw=function(e){ww(e,Ow,{value:{objectID:"O"+_w++,weakData:{}}})},Aw=Zm.exports={enable:function(){Aw.enable=function(){},Nw=!0;var e=Ew.f,t=vw([].splice),r={};r[Ow]=1,e(r).length&&(Ew.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===Ow){t(n,i,1);break}return n},hw({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Tw.f}))},fastKey:function(e,t){if(!gw(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!mw(e,Ow)){if(!bw(e))return"F";if(!t)return"E";Rw(e)}return e[Ow].objectID},getWeakData:function(e,t){if(!mw(e,Ow)){if(!bw(e))return!0;if(!t)return!1;Rw(e)}return e[Ow].weakData},onFreeze:function(e){return Iw&&Nw&&bw(e)&&!mw(e,Ow)&&Rw(e),e}};yw[Ow]=!0;var Sw=sr,Cw=ur,kw=Ms,xw=gs,Mw=Ot,Pw=zt,Uw=cs,Dw=vo,Lw=Zm.exports,Fw=iu,jw=Kc,Vw=sr,Gw=ur,Hw=Rt,Bw=Wp,Kw=Xu,zw=function(e,t,r){var n,i;return kw&&Sw(n=t.constructor)&&n!==r&&Cw(i=n.prototype)&&i!==r.prototype&&kw(e,i),e},qw=vo,Yw=function(e,t,r){for(var n in t)qw(e,n,t[n],r);return e},Ww=zn.f,Xw=na,$w=Yw,Qw=ha,Jw=Kc,Zw=iu,eE=Tc,tE=Gc,rE=At,nE=Zm.exports.fastKey,iE=Qi.set,oE=Qi.getterFor,sE={getConstructor:function(e,t,r,n){var i=e((function(e,i){Jw(e,o),iE(e,{type:t,index:Xw(null),first:void 0,last:void 0,size:0}),rE||(e.size=0),null!=i&&Zw(i,e[n],{that:e,AS_ENTRIES:r})})),o=i.prototype,s=oE(t),a=function(e,t,r){var n,i,o=s(e),a=u(e,t);return a?a.value=r:(o.last=a={index:i=nE(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),rE?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},u=function(e,t){var r,n=s(e),i=nE(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return $w(o,{clear:function(){for(var e=s(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,rE?e.size=0:this.size=0},delete:function(e){var t=this,r=s(t),n=u(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),rE?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=s(this),n=Qw(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),$w(o,r?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),rE&&Ww(o,"size",{get:function(){return s(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",i=oE(t),o=oE(n);eE(e,t,(function(e,t){iE(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),tE(t)}};(function(e,t,r){var n=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=n?"set":"add",s=Mw[e],a=s&&s.prototype,u=s,c={},f=function(e){var t=Pw(a[e]);Dw(a,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Gw(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Gw(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Gw(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(Uw(e,!Vw(s)||!(i||a.forEach&&!Hw((function(){(new s).entries().next()})))))u=r.getConstructor(t,e,n,o),Lw.enable();else if(Uw(e,!0)){var l=new u,p=l[o](i?{}:-0,1)!=l,d=Hw((function(){l.has(1)})),h=Bw((function(e){new s(e)})),v=!i&&Hw((function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((u=t((function(e,t){jw(e,a);var r=zw(new s,e,u);return null!=t&&Fw(t,r[o],{that:r,AS_ENTRIES:n}),r}))).prototype=a,a.constructor=u),(d||v)&&(f("delete"),f("has"),n&&f("get")),(v||p)&&f(o),i&&a.clear&&delete a.clear}c[e]=u,xw({global:!0,constructor:!0,forced:u!=s},c),Kw(u,e),i||r.setStrong(u,e,n)})("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),sE);var aE=Ao,uE=function(e,t){for(var r=0,n=aE(t),i=new e(n);n>r;)i[r]=t[r++];return i},cE=ha,fE=er,lE=Zr,pE=Sn,dE=Ao,hE=na,vE=uE,yE=Array,gE=zt([].push),mE=function(e,t,r,n){for(var i,o,s,a=lE(e),u=fE(a),c=cE(t,r),f=hE(null),l=dE(u),p=0;l>p;p++)s=u[p],(o=pE(c(s,p,a)))in f?gE(f[o],s):f[o]=[s];if(n&&(i=n(a))!==yE)for(o in f)f[o]=vE(i,f[o]);return f},wE=mE,EE=Lu;gs({target:"Array",proto:!0},{group:function(e){var t=arguments.length>1?arguments[1]:void 0;return wE(this,e,t)}}),EE("group");var TE=mE,bE=Lu;gs({target:"Array",proto:!0,forced:!Yv("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return TE(this,e,t)}}),bE("groupBy");var IE=ha,NE=zt,OE=er,_E=Zr,RE=Ao,AE=pr("Map"),SE=AE.prototype,CE=NE(SE.get),kE=NE(SE.has),xE=NE(SE.set),ME=NE([].push),PE=function(e){for(var t,r,n=_E(this),i=OE(n),o=IE(e,arguments.length>1?arguments[1]:void 0),s=new AE,a=RE(i),u=0;a>u;u++)t=o(r=i[u],u,n),kE(s,t)?ME(CE(s,t),r):xE(s,t,[r]);return s},UE=Lu,DE=PE;gs({target:"Array",proto:!0,name:"groupToMap",forced:!Yv("groupByToMap")},{groupByToMap:DE}),UE("groupByToMap");var LE=Lu;gs({target:"Array",proto:!0},{groupToMap:PE}),LE("groupToMap");var FE=Ao,jE=function(e,t){for(var r=FE(e),n=new t(r),i=0;i<r;i++)n[i]=e[r-i-1];return n},VE=or,GE=Lu,HE=Array;gs({target:"Array",proto:!0},{toReversed:function(){return jE(VE(this),HE)}}),GE("toReversed");var BE=Ot,KE=function(e){return BE[e].prototype},zE=gs,qE=Dr,YE=or,WE=uE,XE=Lu,$E=Array,QE=zt(KE("Array").sort);zE({target:"Array",proto:!0},{toSorted:function(e){void 0!==e&&qE(e);var t=YE(this),r=WE($E,t);return QE(r,e)}}),XE("toSorted");var JE=gs,ZE=Lu,eT=tv,tT=Ao,rT=No,nT=or,iT=Eo,oT=Array,sT=Math.max,aT=Math.min;JE({target:"Array",proto:!0},{toSpliced:function(e,t){var r,n,i,o,s=nT(this),a=tT(s),u=rT(e,a),c=arguments.length,f=0;for(0===c?r=n=0:1===c?(r=0,n=a-u):(r=c-2,n=aT(sT(iT(t),0),a-u)),i=eT(a+r-n),o=oT(i);f<u;f++)o[f]=s[f];for(;f<u+r;f++)o[f]=arguments[f-u+2];for(;f<i;f++)o[f]=s[f+n-r];return o}}),ZE("toSpliced");var uT=Ao,cT=Eo,fT=RangeError,lT=function(e,t,r,n){var i=uT(e),o=cT(r),s=o<0?i+o:o;if(s>=i||s<0)throw fT("Incorrect index");for(var a=new t(i),u=0;u<i;u++)a[u]=u===s?n:e[u];return a},pT=or,dT=Array;gs({target:"Array",proto:!0},{with:function(e,t){return lT(pT(this),dT,e,t)}});var hT,vT,yT=Jm,gT=Ot,mT=Xr,wT=sr,ET=_s,TT=vo,bT=wn("asyncIterator"),IT=gT.AsyncIterator,NT=mT.AsyncIteratorPrototype;if(NT)hT=NT;else if(wT(IT))hT=IT.prototype;else if(mT.USE_FUNCTION_CONSTRUCTOR||gT.USE_FUNCTION_CONSTRUCTOR)try{vT=ET(ET(ET(Function("return async function*(){}()")()))),ET(vT)===Object.prototype&&(hT=vT)}catch(e){}hT||(hT={}),wT(hT[bT])||TT(hT,bT,(function(){return this}));var OT=xt,_T=$n,RT=na,AT=Fr,ST=Yw,CT=Qi,kT=hT,xT=pr("Promise"),MT="AsyncFromSyncIterator",PT=CT.set,UT=CT.getterFor(MT),DT=function(e,t,r){var n=e.done;xT.resolve(e.value).then((function(e){t({done:n,value:e})}),r)},LT=function(e){PT(this,{type:MT,iterator:_T(e),next:e.next})};LT.prototype=ST(RT(kT),{next:function(){var e=UT(this);return new xT((function(t,r){var n=_T(OT(e.next,e.iterator));DT(n,t,r)}))},return:function(){var e=UT(this).iterator;return new xT((function(t,r){var n=AT(e,"return");if(void 0===n)return t({done:!0,value:void 0});var i=_T(OT(n,e));DT(i,t,r)}))}});var FT=LT,jT=xt,VT=FT,GT=$n,HT=Va,BT=Fr,KT=wn("asyncIterator"),zT=Dr,qT=$n,YT=xt,WT=pr,XT=Fr,$T=xt,QT=Dr,JT=$n,ZT=tv,eb=pr,tb=function(e){return{iterator:e,next:zT(qT(e).next)}},rb=function(e,t,r,n){try{var i=XT(e,"return");if(i)return WT("Promise").resolve(YT(i,e)).then((function(){t(r)}),(function(e){n(e)}))}catch(e){return n(e)}t(r)},nb=function(e){var t=0==e,r=1==e,n=2==e,i=3==e;return function(e,o,s){var a=tb(e),u=eb("Promise"),c=a.iterator,f=a.next,l=0,p=void 0!==o;return!p&&t||QT(o),new u((function(e,a){var d=function(e){rb(c,a,e,a)},h=function(){try{if(t&&p)try{ZT(l)}catch(e){d(e)}u.resolve(JT($T(f,c))).then((function(f){try{if(JT(f).done)t?(s.length=l,e(s)):e(!i&&(n||void 0));else{var v=f.value;try{p?u.resolve(t?o(v,l):o(v)).then((function(o){if(r)h();else if(n)o?h():rb(c,e,!1,a);else if(t)try{s[l++]=o,h()}catch(e){d(e)}else o?rb(c,e,i||v,a):h()}),d):(s[l++]=v,h())}catch(e){d(e)}}}catch(e){a(e)}}),a)}catch(e){a(e)}};h()}))}},ib={toArray:nb(0),forEach:nb(1),every:nb(2),some:nb(3),find:nb(4)},ob=ha,sb=Zr,ab=cf,ub=function(e,t){var r=arguments.length<2?BT(e,KT):t;return r?GT(jT(r,e)):new VT(HT(e))},cb=Va,fb=Ma,lb=Fr,pb=KE,db=pr,hb=FT,vb=ib.toArray,yb=wn("asyncIterator"),gb=pb("Array").values,mb=function(e){var t=this,r=arguments.length,n=r>1?arguments[1]:void 0,i=r>2?arguments[2]:void 0;return new(db("Promise"))((function(r){var o=sb(e);void 0!==n&&(n=ob(n,i));var s=lb(o,yb),a=s?void 0:fb(o)||gb,u=ab(t)?new t:[],c=s?ub(o,s):new hb(cb(o,a));r(vb(c,n,u))}))};gs({target:"Array",stat:!0,forced:!0},{fromAsync:mb});var wb=zv.filterReject,Eb=Lu;gs({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return wb(this,e,arguments.length>1?arguments[1]:void 0)}}),Eb("filterOut");var Tb=zv.filterReject,bb=Lu;gs({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return Tb(this,e,arguments.length>1?arguments[1]:void 0)}}),bb("filterReject");var Ib=gs,Nb=qh,Ob=Object.isFrozen,_b=function(e,t){if(!Ob||!Nb(e)||!Ob(e))return!1;for(var r,n=0,i=e.length;n<i;)if(!("string"==typeof(r=e[n++])||t&&void 0===r))return!1;return 0!==i};Ib({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!_b(e,!0))return!1;var t=e.raw;return t.length===e.length&&_b(t,!1)}});var Rb=li.exports,Ab=zn,Sb=function(e,t,r){return r.get&&Rb(r.get,t,{getter:!0}),r.set&&Rb(r.set,t,{setter:!0}),Ab.f(e,t,r)},Cb=Lu,kb=Zr,xb=Ao;At&&(Sb(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=kb(this),t=xb(e);return 0==t?void 0:e[t-1]},set:function(e){var t=kb(this),r=xb(t);return t[0==r?0:r-1]=e}}),Cb("lastItem"));var Mb=Lu,Pb=Zr,Ub=Ao;At&&(Sb(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=Pb(this),t=Ub(e);return 0==t?0:t-1}}),Mb("lastIndex"));var Db=zt,Lb=Dr,Fb=Ao,jb=Zr,Vb=uv,Gb=pr("Map"),Hb=Gb.prototype,Bb=Db(Hb.forEach),Kb=Db(Hb.has),zb=Db(Hb.set),qb=Db([].push),Yb=Lu;gs({target:"Array",proto:!0,forced:!0},{uniqueBy:function(e){var t,r,n,i=jb(this),o=Fb(i),s=Vb(i,0),a=new Gb,u=null!=e?Lb(e):function(e){return e};for(t=0;t<o;t++)n=u(r=i[t]),Kb(a,n)||zb(a,n,r);return Bb(a,(function(e){qb(s,e)})),s}}),Yb("uniqueBy");var Wb=yT;!function(e){e.exports=Wb}({exports:{}});var Xb,$b=function(){function e(e){var t=e.timeout,r=e.callback;this.timeout=Math.max(t,0),this.callback=r}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e}(),Qb=function(){function e(e,t,r){this.buffer=[],this.sink=e,this.maxQueueSize=t,this.timer=new $b({callback:this.flush.bind(this),timeout:r}),this.started=!1}return e.prototype.start=function(){this.started=!0},e.prototype.stop=function(){this.started=!1;var e=this.sink(this.buffer,!0);return this.buffer=[],this.timer.stop(),e},e.prototype.enqueue=function(e){this.started&&(0===this.buffer.length&&this.timer.refresh(),this.buffer.push(e),this.buffer.length>=this.maxQueueSize&&this.flush())},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e.prototype.close=function(){this.stop()},e}(),Jb=function(){function e(e,t,r,n){void 0===n&&(n=null),this.eventDispatcher=e,this.flushInterval=r,this.queue=new Qb(this.drainQueue.bind(this),t,r),this.repository=n}return e.prototype.isClientError=function(e){return!!(e&&e.statusCode>=400&&e.statusCode<500)},e.prototype.drainRepository=function(e){var t=this;return new Promise((function(r){return i(t,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(o){switch(o.label){case 0:return[4,null===(n=this.repository)||void 0===n?void 0:n.read()];case 1:return(t=o.sent())&&0!==t.length?(e?this.eventDispatcher.dispatchXhrOrBeacon(t,(function(){var e;r(null===(e=i.repository)||void 0===e?void 0:e.delete(t))}),(function(e){var n;i.isClientError(e)?r(null===(n=i.repository)||void 0===n?void 0:n.delete(t)):r()})):this.eventDispatcher.dispatch(t,(function(){var e;r(null===(e=i.repository)||void 0===e?void 0:e.delete(t))}),(function(e){var n;i.isClientError(e)?r(null===(n=i.repository)||void 0===n?void 0:n.delete(t)):r()})),[2]):(r(),[2])}}))}))}))},e.prototype.drainQueue=function(e,t){var r=this,n=e.map((function(e){return e.toDto()})),s=new Promise((function(s){return i(r,void 0,void 0,(function(){var r,i=this;return o(this,(function(o){return 0===e.length?(s(),[2]):(t?(null===(r=this.repository)||void 0===r||r.add(n),this.eventDispatcher.dispatchXhrOrBeacon(e,(function(){var e;s(null===(e=i.repository)||void 0===e?void 0:e.delete(n))}),(function(e){var t;i.isClientError(e)?s(null===(t=i.repository)||void 0===t?void 0:t.delete(n)):s()}))):this.eventDispatcher.dispatch(e,(function(){s()}),(function(e){var t;i.isClientError(e)?s():s(null===(t=i.repository)||void 0===t?void 0:t.add(n))})),[2])}))}))}));return s},e.prototype.process=function(e){this.queue.enqueue(e)},e.prototype.start=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){return this.queue.start(),[2]}))}))},e.prototype.stop=function(){try{this.queue.close()}catch(e){}return Promise.resolve()},e.prototype.flush=function(){this.queue.flush()},e.prototype.close=function(){this.stop()},e}(),Zb=function(){function e(){}return e.isEquals=function(e,t){if(null==t)return!1;var r=Object.keys(e);return r.length===Object.keys(t).length&&r.every((function(r){return e[r]===t[r]}))},e}(),eI=function(){function e(e,t){this.hackleUserResolver=e,this.hackleInternalClient=t}return e.isSessionEvent=function(t){return!!Ke.isTrack(t)&&(t.event.key===e.SESSION_START_EVENT_NAME||t.event.key===e.SESSION_END_EVENT_NAME)},e.prototype.onSessionStarted=function(t,r,n){this.track(e.SESSION_START_EVENT_NAME,t,r,n)},e.prototype.onSessionEnded=function(t,r,n){this.track(e.SESSION_END_EVENT_NAME,t,r,n)},e.prototype.track=function(e,t,r,n){var i={key:e,properties:{sessionId:t}},o=this.hackleUserResolver.resolve(r),s=this.decorateSession(o,t);this.hackleInternalClient._track(i,s,n)},e.prototype.decorateSession=function(e,t){var r=(new H).add(G.SESSION,t).addIdentifiers(e.identifiers).build();return n(n({},e),{identifiers:r})},e.SESSION_START_EVENT_NAME="$session_start",e.SESSION_END_EVENT_NAME="$session_end",e}(),tI=function(){function e(e,t,r,n){this.delegate=e,this.exposureEventDedupDeterminer=t,this.sessionManager=r,this.userManager=n}return e.prototype.process=function(e){if(eI.isSessionEvent(e)||this.sessionManager.startNewSessionIfNeeded(this.userManager.currentUser,e.timestamp),!this.exposureEventDedupDeterminer.isDedupTarget(e)){var t=function(e,t){var r;return null===t.currentSessionId||e.user.identifiers[G.SESSION]?e:e.copyWithUser(n(n({},e.user),{identifiers:n(n({},e.user.identifiers),(r={},r[G.SESSION]=t.sessionId,r))}))}(e,this.sessionManager);this.delegate.process(t)}},e.prototype.close=function(){this.delegate.close()},e.prototype.flush=function(){this.delegate.flush()},e.prototype.start=function(){return this.delegate.start()},e}(),rI=function(){function e(e){this.cache=new Map,this.exposureEventDedupIntervalMillis=e}return e.prototype.isDedupTarget=function(e){var t;if(-1===this.exposureEventDedupIntervalMillis)return!1;if(!Ke.isExposure(e))return!1;Zb.isEquals(e.user.identifiers,null===(t=this.currentUser)||void 0===t?void 0:t.identifiers)||(this.currentUser=e.user,this.cache=new Map);var r=[e.experiment.id,e.variationId,e.variationKey,e.decisionReason].join("-"),n=(new Date).getTime(),i=this.cache.get(r);return void 0!==i&&n-i<=this.exposureEventDedupIntervalMillis||(this.cache.set(r,n),!1)},e}(),nI=function(){function e(){}return e.toEvent=function(t){var r;return{key:e.EVENT_KEY,properties:{level:e.LEVEL_ERROR,type:t.name,message:null!==(r=t.message)&&void 0!==r?r:"",$stacktrace:e._stacktrace(t)}}},e._stacktrace=function(t){return A.isNullOrUndefined(t.stack)?"":t.stack.split("\n").slice(0,e.STACK_TRACK_LIMIT).join("\n")},e.EVENT_KEY="$trace",e.LEVEL_ERROR="error",e.STACK_TRACK_LIMIT=30,e}(),iI=l.log,oI=function(){function e(e,t,r,n){this.workspaceFetcher=e,this.eventProcessor=t,this.evaluator=r,this.errorDedupDeterminer=n,this.workspaceFetcher.start(),this.eventProcessor.start(),this.readyPromise=this.workspaceFetcher.onReady().then((function(){return{success:!0}}),(function(e){return{success:!1,error:e}}))}return e.prototype._experiment=function(e,t,r){var n;if(!e)return iI.error("experimentKey must not be empty"),k.of(r,U.INVALID_INPUT);var i=this.workspaceFetcher.get();if(!i)return iI.warn("SDK not ready."),k.of(r,U.SDK_NOT_READY);var o=i.getExperimentOrNull(e);if(!o)return iI.warn("Experiment does not exist."),k.of(r,U.EXPERIMENT_NOT_FOUND);var s=this.evaluator.evaluate(i,o,t,r);this.eventProcessor.process(Ke.exposure(o,t,s));var a=null!==(n=s.config)&&void 0!==n?n:new P;return k.of(s.variationKey,s.reason,a)},e.prototype._featureFlag=function(e,t){var r;if(!e)return iI.error("featureKey must not be empty"),x.off(U.INVALID_INPUT);var n=this.workspaceFetcher.get();if(!n)return iI.warn("SDK not ready."),x.off(U.SDK_NOT_READY);var i=n.getFeatureFlagOrNull(e);if(!i)return iI.warn("FeatureFlag does not exist."),x.off(U.FEATURE_FLAG_NOT_FOUND);var o=this.evaluator.evaluate(n,i,t,"A");this.eventProcessor.process(Ke.exposure(i,t,o));var s=null!==(r=o.config)&&void 0!==r?r:new P;return"A"===o.variationKey?x.off(o.reason,s):x.on(o.reason,s)},e.prototype._track=function(e,t,r){var n;if(void 0===r&&(r=(new Date).getTime()),e)if("object"==typeof e)if("object"!=typeof e||e.key&&"string"==typeof e.key){var i=(null===(n=this.workspaceFetcher.get())||void 0===n?void 0:n.getEventTypeOrNull(e.key))||new V(0,e.key);this.eventProcessor.process(Ke.track(i,e,t,r))}else iI.warn("Event key must be not null. or event key must be string type.");else iI.warn("Event must be event type.");else iI.warn("event must not be null.")},e.prototype._trackException=function(e,t){if(!this.errorDedupDeterminer.isDedupTarget(e)){var r=nI.toEvent(e);this._flush(),this._track(r,t),this._flush()}},e.prototype._flush=function(){this.eventProcessor.flush()},e.prototype._remoteConfig=function(e,t,r,n){var i=this.workspaceFetcher.get();if(A.isNullOrUndefined(i))return iI.warn("SDK not ready."),C.of(n,U.SDK_NOT_READY);var o=i.getRemoteConfigParameterOrNull(e);if(A.isNullOrUndefined(o))return iI.warn("Remote config parameter does not exist."),C.of(n,U.REMOTE_CONFIG_PARAMETER_NOT_FOUND);var s=this.evaluator.remoteConfigEvaluate(i,o,t,r,n);return this.eventProcessor.process(Ke.remoteConfig(o,t,s)),C.of(s.value,s.reason)},e.prototype._onReady=function(e,t){void 0===t&&(t=g),this._onInitialized({timeout:t}).then((function(){return e()}))},e.prototype._onInitialized=function(e){var t,r=e.timeout,n=void 0===r?g:r;iI.debug("Start HackleClient initializing");var i=new Promise((function(e){t=e})),o=setTimeout((function(){t({success:!1})}),n);return this.readyPromise.then((function(){clearTimeout(o),t({success:!0})}),(function(e){clearTimeout(o),t({success:!1,error:e})})),Promise.race([this.readyPromise,i]).then((function(e){return e.success?iI.debug("HackleClient onInitialized Success"):e.error instanceof Error?iI.error("HackleClient onInitialized Failed. ".concat(e.error.message)):iI.error("HackleClient onInitialized Failed. ".concat(e.error)),Promise.resolve({success:e.success})}))},e.prototype._close=function(){this.workspaceFetcher.close(),this.eventProcessor.close()},e}(),sI=function(){function e(){}return e.prototype.isDedupTarget=function(e){return!!this._isSameError(e,this.previous)||(this.previous=e,!1)},e.prototype._isSameError=function(e,t){return!A.isNullOrUndefined(t)&&(e.name===t.name&&e.message===t.message&&e.stack===t.stack)},e}(),aI=function(){function e(e,t,r,n){this.variationId=e,this.variationKey=t,this.reason=r,this.config=n}return e.of=function(t,r,n,i){var o=r._getVariationByKeyOrNull(n);return A.isNotNullOrUndefined(o)?e.withVariation(t,o,i):new e(void 0,n,i,void 0)},e.withVariation=function(t,r,n){var i=this.config(t,r);return new e(r.id,r.key,n,i)},e.config=function(e,t){if(!A.isNullOrUndefined(t.parameterConfigurationId))return A.requiredNotNullOrUndefined(e.getParameterConfigurationOrNull(t.parameterConfigurationId),(function(){return"ParameterConfiguration[".concat(t.parameterConfigurationId,"]")}))},e}(),uI=function(e,t,r,n){this.valueId=e,this.value=t,this.reason=r,this.properties=n},cI=function(){function e(e){this.evaluationFlowFactory=e}return e.prototype.evaluate=function(e,t,r,n){return this.evaluationFlowFactory.getFlow(t.type).evaluate(e,t,r,n)},e.prototype.remoteConfigEvaluate=function(e,t,r,n,i){var o={};if(o.requestValueType=n,o.requestDefaultValue=i,A.isNullOrUndefined(r.identifiers[t.identifierType]))return new uI(void 0,i,U.IDENTIFIER_NOT_FOUND,o);var s=this.evaluationFlowFactory.getRemoteConfigParameterTargetRuleDeterminer().determineTargetRuleOrNull(e,t,r);return s?(o.targetRuleKey=s.key,o.targetRuleName=s.name,this.getRemoteConfigEvaluationWithTypeCheck(s.value,U.TARGET_RULE_MATCH,n,i,o)):this.getRemoteConfigEvaluationWithTypeCheck(t.defaultValue,U.DEFAULT_RULE,n,i,o)},e.prototype.getRemoteConfigEvaluationWithTypeCheck=function(e,t,r,n,i){return"UNKNOWN"===r||"NULL"!==r&&typeof n!=typeof e.rawValue?(i.returnValue=n,new uI(void 0,n,U.TYPE_MISMATCH,i)):(i.returnValue=e.rawValue,new uI(e.id,e.rawValue,t,i))},e}(),fI=function(){function e(e){this.conditionMatcherFactory=e}return e.prototype.matches=function(e,t,r){var n=this;return e.conditions.every((function(e){return n._matches(e,t,r)}))},e.prototype._matches=function(e,t,r){return this.conditionMatcherFactory.getMatcher(e.key.type).matches(e,t,r)},e}(),lI=function(){function e(e,t){this.valueMatcherFactory=e,this.operatorMatcherFactory=t}return e.prototype.matches=function(e,t){var r=this.valueMatcherFactory.getMatcher(t.valueType),n=this.operatorMatcherFactory.getMatcher(t.operator),i=t.values.some((function(t){return r.matches(n,e,t)}));return this._matches(t.type,i)},e.prototype._matches=function(e,t){switch(e){case"MATCH":return t;case"NOT_MATCH":return!t}},e}(),pI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return e===t},e.prototype.numberMatches=function(e,t){return e===t},e.prototype.stringMatches=function(e,t){return e===t},e.prototype.versionMatches=function(e,t){return e.isEqualTo(t)},e}(),dI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return!1},e.prototype.stringMatches=function(e,t){return e.includes(t)},e.prototype.versionMatches=function(e,t){return!1},e}(),hI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return!1},e.prototype.stringMatches=function(e,t){return e.startsWith(t)},e.prototype.versionMatches=function(e,t){return!1},e}(),vI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return!1},e.prototype.stringMatches=function(e,t){return e.endsWith(t)},e.prototype.versionMatches=function(e,t){return!1},e}(),yI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return e>t},e.prototype.stringMatches=function(e,t){return!1},e.prototype.versionMatches=function(e,t){return e.isGreaterThan(t)},e}(),gI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return e>=t},e.prototype.stringMatches=function(e,t){return!1},e.prototype.versionMatches=function(e,t){return e.isGreaterThanOrEqualTo(t)},e}(),mI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return e<t},e.prototype.stringMatches=function(e,t){return!1},e.prototype.versionMatches=function(e,t){return e.isLessThan(t)},e}(),wI=function(){function e(){}return e.prototype.booleanMatches=function(e,t){return!1},e.prototype.numberMatches=function(e,t){return e<=t},e.prototype.stringMatches=function(e,t){return!1},e.prototype.versionMatches=function(e,t){return e.isLessThanOrEqualTo(t)},e}(),EI=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"IN":return e.IN_MATCHER;case"CONTAINS":return e.CONTAINS_MATCHER;case"STARTS_WITH":return e.STARTS_WITH_MATCHER;case"ENDS_WITH":return e.ENDS_WITH_MATCHER;case"GT":return e.GT_MATCHER;case"GTE":return e.GTE_MATCHER;case"LT":return e.LT_MATCHER;case"LTE":return e.LTE_MATCHER}},e.IN_MATCHER=new pI,e.CONTAINS_MATCHER=new dI,e.STARTS_WITH_MATCHER=new hI,e.ENDS_WITH_MATCHER=new vI,e.GT_MATCHER=new yI,e.GTE_MATCHER=new gI,e.LT_MATCHER=new mI,e.LTE_MATCHER=new wI,e}(),TI=function(){function e(){}return e.prototype.matches=function(e,t,r){return"string"==typeof t&&"string"==typeof r&&e.stringMatches(t,r)},e}(),bI=function(){function e(){}return e.prototype.matches=function(e,t,r){return"number"==typeof t&&"number"==typeof r&&e.numberMatches(t,r)},e}(),II=function(){function e(){}return e.prototype.matches=function(e,t,r){return"boolean"==typeof t&&"boolean"==typeof r&&e.booleanMatches(t,r)},e}(),NI=function(){function e(){}return e.prototype.matches=function(e,t,r){var n=le.tryParse(t),i=le.tryParse(r);return!(!n||!i)&&e.versionMatches(n,i)},e}(),OI=function(){function e(){}return e.prototype.matches=function(e,t,r){return!1},e}(),_I=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"STRING":case"JSON":return e.STRING_MATCHER;case"NUMBER":return e.NUMBER_MATCHER;case"BOOLEAN":return e.BOOLEAN_MATCHER;case"VERSION":return e.VERSION_MATCHER;case"NULL":case"UNKNOWN":return e.NULL_MATCHER}},e.STRING_MATCHER=new TI,e.NUMBER_MATCHER=new bI,e.BOOLEAN_MATCHER=new II,e.VERSION_MATCHER=new NI,e.NULL_MATCHER=new OI,e}(),RI=function(){function e(e,t){this.userValueResolver=e,this.valueOperatorMatcher=t}return e.prototype.matches=function(e,t,r){var n=this.userValueResolver.resolveOrNull(r,e.key);return!A.isNullOrUndefined(n)&&this.valueOperatorMatcher.matches(n,e.match)},e}(),AI=function(){function e(){}return e.prototype.resolveOrNull=function(e,t){switch(t.type){case"USER_ID":return e.identifiers[t.name];case"USER_PROPERTY":return e.properties[t.name];case"HACKLE_PROPERTY":return e.hackleProperties[t.name];case"SEGMENT":throw new Error("Unsupported TargetKeyType [".concat(t.type,"]"))}},e}(),SI=function(){function e(e){this.segmentMatcher=e}return e.prototype.matches=function(e,t,r){var n=this;if("SEGMENT"!=e.key.type)throw new Error("Unsupported TargetKeyType [".concat(e.key.type,"]"));var i=e.match.values.some((function(e){return n._matches(e,t,r)}));switch(e.match.type){case"MATCH":return i;case"NOT_MATCH":return!i}},e.prototype._matches=function(e,t,r){if("string"!=typeof e)throw new Error("SegmentKey[".concat(e,"]"));var n=t.getSegmentOrNull(e);if(!n)throw new Error("Segment[".concat(e,"]"));return this.segmentMatcher.matches(n,t,r)},e}(),CI=function(){function e(e){this.userConditionMatcher=e}return e.prototype.matches=function(e,t,r){var n=this;return e.targets.some((function(e){return n._matches(e,t,r)}))},e.prototype._matches=function(e,t,r){var n=this;return e.conditions.every((function(e){return n.userConditionMatcher.matches(e,t,r)}))},e}(),kI=function(){function e(){}return e.prototype.getMatcher=function(t){switch(t){case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":return e.USER_CONDITION_MATCHER;case"SEGMENT":return e.SEGMENT_CONDITION_MATCHER}},e.USER_CONDITION_MATCHER=new RI(new AI,new lI(new _I,new EI)),e.SEGMENT_CONDITION_MATCHER=new SI(new CI(e.USER_CONDITION_MATCHER)),e}(),xI=function(){function e(e){this.bucketer=e}return e.prototype.resolveOrNull=function(e,t,r,n){switch(e.type){case"VARIATION":return this._resolveVariation(e,r);case"BUCKET":return this._resolveBucket(e,t,r,n)}},e.prototype._resolveVariation=function(e,t){return t._getVariationByIdOrNull(e.variationId)},e.prototype._resolveBucket=function(e,t,r,n){var i=t.getBucketOrNull(e.bucketId),o=n.identifiers[r.identifierType];if(o){var s=this.bucketer.bucketing(i,o);if(s)return r._getVariationByIdOrNull(s.variationId)}},e}(),MI={murmurhash3_x86_32:function(e,t,r,n){void 0===n&&(n=e.length);for(var i,o=3432918353,s=461845907,a=-4&n,u=t,c=0;c<a;c+=4)i=255&e.charCodeAt(c)|(255&e.charCodeAt(c+1))<<8|(255&e.charCodeAt(c+2))<<16|(255&e.charCodeAt(c+3))<<24,i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,u=5*(u=(524287&(u^=i=this.mul32(i,s)))<<13|u>>>19)+3864292196|0;switch(i=0,n%4){case 3:i=(255&e.charCodeAt(a+2))<<16;case 2:i|=(255&e.charCodeAt(a+1))<<8;case 1:i|=255&e.charCodeAt(a),i=(131071&(i=this.mul32(i,o)))<<15|i>>>17,u^=i=this.mul32(i,s)}return u^=n,u^=u>>>16,u=this.mul32(u,2246822507),u^=u>>>13,u=this.mul32(u,3266489909),u^=u>>>16},mul32:function(e,t){var r=65535&t;return((t-r)*e|0)+(r*e|0)|0}},PI=function(){function e(){}return e.prototype.bucketing=function(e,t){var r=this.calculateSlotNumber(e.seed,e.slotSize,t);return e.slots.find((function(e){return e.contains(r)}))},e.prototype.calculateSlotNumber=function(e,t,r){var n=MI.murmurhash3_x86_32(r,e);return Math.abs(n)%Math.abs(t)},e}(),UI=function(){function e(e,t){void 0===e&&(e=void 0),void 0===t&&(t=void 0),this.flowEvaluator=e,this.nextFlow=t}return e.prototype.evaluate=function(e,t,r,n){return this.flowEvaluator&&this.nextFlow?this.flowEvaluator.evaluate(e,t,r,n,this.nextFlow):aI.of(e,t,n,U.TRAFFIC_NOT_ALLOCATED)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e,i=0,o=t.reverse();i<o.length;i++){var s=o[i];n=new e(s,n)}return n},e}(),DI=function(){function e(e){this.overrideResolver=e}return e.prototype.evaluate=function(e,t,r,n,i){var o=this.overrideResolver.resolveOrNull(e,t,r);if(!o)return i.evaluate(e,t,r,n);switch(t.type){case"AB_TEST":return aI.withVariation(e,o,U.OVERRIDDEN);case"FEATURE_FLAG":return aI.withVariation(e,o,U.INDIVIDUAL_TARGET_MATCH)}},e}(),LI=function(){function e(){}return e.prototype.evaluate=function(e,t,r,n,i){return"DRAFT"===t.status?aI.of(e,t,n,U.EXPERIMENT_DRAFT):i.evaluate(e,t,r,n)},e}(),FI=function(){function e(){}return e.prototype.evaluate=function(e,t,r,n,i){if("PAUSED"!==t.status)return i.evaluate(e,t,r,n);switch(t.type){case"AB_TEST":return aI.of(e,t,n,U.EXPERIMENT_PAUSED);case"FEATURE_FLAG":return aI.of(e,t,n,U.FEATURE_FLAG_INACTIVE)}},e}(),jI=function(){function e(){}return e.prototype.evaluate=function(e,t,r,n,i){if("COMPLETED"===t.status){var o=t._winnerVariationOrNull();if(!o)throw new Error("winner variation [".concat(t.id,"]"));return aI.withVariation(e,o,U.EXPERIMENT_COMPLETED)}return i.evaluate(e,t,r,n)},e}(),VI=function(){function e(e){this.experimentTargetDeterminer=e}return e.prototype.evaluate=function(e,t,r,n,i){if("AB_TEST"!==t.type)throw new Error("experiment type must be AB_TEST [".concat(t.id,"]"));return this.experimentTargetDeterminer.isUserInExperimentTarget(e,t,r)?i.evaluate(e,t,r,n):aI.of(e,t,n,U.NOT_IN_EXPERIMENT_TARGET)},e}(),GI=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,r,n,i){if("RUNNING"!==t.status)throw new Error("experiment status must be RUNNING [".concat(t.id,"]"));if("AB_TEST"!==t.type)throw new Error("experiment type must be AB_TEST [".concat(t.id,"]"));var o=this.actionResolver.resolveOrNull(t.defaultRule,e,t,r);return o?o.isDropped?aI.of(e,t,n,U.VARIATION_DROPPED):aI.withVariation(e,o,U.TRAFFIC_ALLOCATED):aI.of(e,t,n,U.TRAFFIC_NOT_ALLOCATED)},e}(),HI=function(){function e(e,t){this.targetRuleDeterminer=e,this.actionResolver=t}return e.prototype.evaluate=function(e,t,r,n,i){if("RUNNING"!==t.status)throw new Error("experiment status must be RUNNING [".concat(t.id,"]"));if("FEATURE_FLAG"!==t.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(t.id,"]"));if(!r.identifiers[t.identifierType])return i.evaluate(e,t,r,n);var o=this.targetRuleDeterminer.determineTargetRuleOrNull(e,t,r);if(!o)return i.evaluate(e,t,r,n);var s=this.actionResolver.resolveOrNull(o.action,e,t,r);if(!s)throw new Error("FeatureFlag must decide the Variation [".concat(t.id,"]"));return aI.withVariation(e,s,U.TARGET_RULE_MATCH)},e}(),BI=function(){function e(e){this.actionResolver=e}return e.prototype.evaluate=function(e,t,r,n,i){if("RUNNING"!==t.status)throw new Error("experiment status must be RUNNING [".concat(t.id,"]"));if("FEATURE_FLAG"!==t.type)throw new Error("experiment type must be FEATURE_FLAG [".concat(t.id,"]"));if(!r.identifiers[t.identifierType])return aI.of(e,t,n,U.DEFAULT_RULE);var o=this.actionResolver.resolveOrNull(t.defaultRule,e,t,r);if(!o)throw new Error("FeatureFlag must decide the Variation [".concat(t.id,"]"));return aI.withVariation(e,o,U.DEFAULT_RULE)},e}(),KI=function(){function e(e){this.containerResolver=e}return e.prototype.evaluate=function(e,t,r,n,i){var o=t.containerId;if(!o)return i.evaluate(e,t,r,n);var s=e.getContainerOrNull(o);if(!s)throw new Error("container[".concat(o,"]"));var a=e.getBucketOrNull(s.bucketId);if(!a)throw new Error("bucket[".concat(s.bucketId,"]"));return this.containerResolver.isUserInContainerGroup(s,a,t,r)?i.evaluate(e,t,r,n):aI.of(e,t,n,U.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT)},e}(),zI=function(){function e(){}return e.prototype.evaluate=function(e,t,r,n,i){return r.identifiers[t.identifierType]?i.evaluate(e,t,r,n):aI.of(e,t,n,U.IDENTIFIER_NOT_FOUND)},e}(),qI=function(){function e(e){this.targetMatcher=e}return e.prototype.isUserInExperimentTarget=function(e,t,r){var n=this;return 0===t.targetAudiences.length||t.targetAudiences.some((function(t){return n.targetMatcher.matches(t,e,r)}))},e}(),YI=function(){function e(e){this.targetMatcher=e}return e.prototype.determineTargetRuleOrNull=function(e,t,r){var n=this;return t.targetRules.find((function(t){return n.targetMatcher.matches(t.target,e,r)}))},e}(),WI=function(){function e(e,t){this.targetMatcher=e,this.actionResolver=t}return e.prototype.resolveOrNull=function(e,t,r){var n=this._resolveUserOverride(t,r);return n||this._resolveSegmentOverride(e,t,r)},e.prototype._resolveUserOverride=function(e,t){var r=t.identifiers[e.identifierType];if(r){var n=e.userOverrides.get(r);if(n)return e._getVariationByIdOrNull(n)}},e.prototype._resolveSegmentOverride=function(e,t,r){var n=this,i=t.segmentOverrides.find((function(t){return n.targetMatcher.matches(t.target,e,r)}));if(i)return this.actionResolver.resolveOrNull(i.action,e,t,r)},e}(),XI=function(){function e(e){this.bucketer=e}return e.prototype.isUserInContainerGroup=function(e,t,r,n){var i=n.identifiers[r.identifierType];if(!i)return!1;var o=this.bucketer.bucketing(t,i);if(!o)return!1;var s=e.getGroupOrNull(o.variationId);if(!s)throw new Error("ContainerGroup[".concat(o.variationId,"]"));return s.experiments.includes(r.id)},e}(),$I=function(){function e(e,t){this.targetMatcher=e,this.bucketer=t}return e.prototype.determineTargetRuleOrNull=function(e,t,r){var n=this;return t.targetRules.find((function(i){return n.matches(i,e,t,r)}))},e.prototype.matches=function(e,t,r,n){if(!this.targetMatcher.matches(e.target,t,n))return!1;var i=n.identifiers[r.identifierType];if(A.isNullOrUndefined(i))return!1;var o=t.getBucketOrNull(e.bucketId);if(A.isNullOrUndefined(o))throw new Error("bucket[".concat(e.bucketId,"]"));return A.isNotNullOrUndefined(this.bucketer.bucketing(o,i))},e}(),QI=function(){function e(){var e=new PI,t=new fI(new kI),r=new xI(e),n=new WI(t,r),i=new XI(e);this.abTestFlow=UI.of(new DI(n),new zI,new KI(i),new VI(new qI(t)),new LI,new FI,new jI,new GI(r)),this.featureFlagFlow=UI.of(new LI,new FI,new jI,new DI(n),new zI,new HI(new YI(t),r),new BI(r)),this.remoteConfigParameterTargetRuleDeterminer=new $I(t,e)}return e.prototype.getFlow=function(e){switch(e){case"AB_TEST":return this.abTestFlow;case"FEATURE_FLAG":return this.featureFlagFlow}},e.prototype.getRemoteConfigParameterTargetRuleDeterminer=function(){return this.remoteConfigParameterTargetRuleDeterminer},e}(),JI=function(){function e(){this._installed=[],this._installations={onerror:eN,onunhandledrejection:tN}}return e.prototype.install=function(e,t){this._install("onerror",e,t),this._install("onunhandledrejection",e,t)},e.prototype._install=function(e,t,r){e in this._installed||((0,this._installations[e])(t,r),this._installed.push(e))},e}(),ZI=null;function eN(e,t){ZI=window.onerror,window.onerror=function(r,n,i,o,s){A.isNotNullOrUndefined(s)&&e._trackException(s,t.resolveCurrentUser()),ZI&&ZI.apply(this,arguments)}}function tN(e,t){Xb=window.onunhandledrejection,window.onunhandledrejection=function(r){var n;try{"reason"in r?n=r.reason:"detail"in r&&"reason"in r.detail&&(n=r.detail.reason)}catch(e){}n instanceof Error&&e._trackException(n,t.resolveCurrentUser()),Xb&&Xb.apply(this,arguments)}}var rN=function(){function e(e,t,r){this.storage=e,this.storageKey=t,this.maxSize=r}return e.prototype.read=function(){var e=this;return new Promise((function(t){var r=e.storage.getItem(e.storageKey);r&&t(JSON.parse(r));t([])}))},e.prototype.save=function(e){var t=this;return 0===e.length?this.clear():new Promise((function(r){var n=JSON.stringify(e.slice(-t.maxSize));t.storage.setItem(t.storageKey,n),r()}))},e.prototype.add=function(e){var t=this;return this.read().then((function(r){return t.save(r.concat(e).slice(-t.maxSize))}))},e.prototype.delete=function(e){var t=this;return this.read().then((function(r){var n=r.filter((function(t){return e.findIndex((function(e){return e.insertId===t.insertId}))<0}));return t.save(n)}))},e.prototype.clear=function(){var e=this;return new Promise((function(t){localStorage.removeItem(e.storageKey),t()}))},e}(),nN=function(e,t){return e.userId===t.userId&&e.deviceId===t.deviceId},iN=function(){function e(e,t){this.storage=e,this.hackleDeviceId=t,this.userListeners=[],this.defaultUser={deviceId:this.hackleDeviceId},this._currentUser=this.defaultUser,this.initialize()}return e.prototype.addListener=function(e){this.userListeners.push(e)},e.prototype.initialize=function(){var e=this.storage.getItem(N)||this.hackleDeviceId,t=this.storage.getItem(I)||void 0;this._currentUser={deviceId:e,userId:t}},Object.defineProperty(e.prototype,"currentUser",{get:function(){return this._currentUser},enumerable:!1,configurable:!0}),e.prototype.resolveCurrentOrNull=function(e){if(void 0===e)return this.currentUser;if("string"==typeof e)return this.setUser({id:e});var t=q(e);return t?this.setUser(t):null},e.prototype.setUser=function(e){var t=this._currentUser,r=function(e,t){return nN(e,t)?n(n({},t),{properties:n(n({},e.properties),t.properties)}):t}(t,e);return this._currentUser=r,nN(t,r)||(this.changeUser(t,r,(new Date).getTime()),this.saveUser(r)),r},e.prototype.setUserId=function(e){var t=n(n({},this._currentUser),{userId:e});return this.setUser(t)},e.prototype.setDeviceId=function(e){var t=n(n({},this._currentUser),{deviceId:e});return this.setUser(t)},e.prototype.setUserProperty=function(e,t){var r,i=n(n({},this._currentUser),{properties:n(n({},this._currentUser.properties),(r={},r[e]=t,r))});return this.setUser(i)},e.prototype.setUserProperties=function(e){var t=n(n({},this._currentUser),{properties:n(n({},this._currentUser.properties),e)});return this.setUser(t)},e.prototype.resetUser=function(){return this.setUser(this.defaultUser)},e.prototype.changeUser=function(e,t,r){this.userListeners.forEach((function(n){n.onUserUpdated(e,t,r)}))},e.prototype.saveUser=function(e){A.isNotNullOrUndefined(e.deviceId)?this.storage.setItem(N,e.deviceId):this.storage.removeItem(N),A.isNotNullOrUndefined(e.userId)?this.storage.setItem(I,e.userId):this.storage.removeItem(I)},e}(),oN=function(){function e(e,t){this.sessionTimeoutMillis=e,this.storage=t,this.sessionListeners=[],this._currentSessionId=null,this._lastEventTime=null,this.loadSession(),this.loadLastEventTime()}return Object.defineProperty(e.prototype,"currentSessionId",{get:function(){return this._currentSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){var t;return null!==(t=this._currentSessionId)&&void 0!==t?t:e.EMPTY_SESSION_ID},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},enumerable:!1,configurable:!0}),e.prototype.addListener=function(e){this.sessionListeners.push(e)},e.prototype.startNewSession=function(e,t){return this.endSession(e),this.newSession(e,t)},e.prototype.startNewSessionIfNeeded=function(e,t){var r=this._lastEventTime;return null===r?this.startNewSession(e,t):null!==this._currentSessionId&&t-r<this.sessionTimeoutMillis?(this.updateLastEventTime(t),this._currentSessionId):this.startNewSession(e,t)},e.prototype.updateLastEventTime=function(e){this._lastEventTime=e,this.storage.setItem(b,"".concat(e))},e.prototype.endSession=function(e){var t=this._currentSessionId,r=this._lastEventTime;null!==t&&null!==r&&this.sessionListeners.forEach((function(n){return n.onSessionEnded(t,e,r)}))},e.prototype.newSession=function(e,t){var r=function(e){return"".concat(e,".").concat(Ve().slice(0,8))}(t);return this.saveSession(r),this.updateLastEventTime(t),this.sessionListeners.forEach((function(n){n.onSessionStarted(r,e,t)})),r},e.prototype.saveSession=function(e){this._currentSessionId=e,this.storage.setItem(T,e)},e.prototype.loadSession=function(){this._currentSessionId=this.storage.getItem(T)},e.prototype.loadLastEventTime=function(){var e=this.storage.getItem(b);if(null!==e){var t=Number.parseFloat(e);t>0&&(this._lastEventTime=t)}},e.prototype.onUserUpdated=function(e,t,r){this.endSession(e),this.newSession(t,r)},e.EMPTY_SESSION_ID="0.ffffffff",e}(),sN=function(){function e(e,t){this.delegate=e,this.transform=t}return e.postfix=function(t,r){return new e(t,(function(e){return"".concat(e).concat(r)}))},e.prototype.getItem=function(e){return this.delegate.getItem(this.transform(e))},e.prototype.removeItem=function(e){this.delegate.removeItem(this.transform(e))},e.prototype.setItem=function(e,t){this.delegate.setItem(this.transform(e),t)},e}(),aN=l.log,uN=null,cN={debug:!1,log_disabled:!1,auto_track_page_view:!0,pollingIntervalMillis:-1,exposureEventDedupIntervalMillis:-1,sessionTimeoutMillis:18e5,SDK_NAME_HEADER:"javascript-sdk_browser",SDK_VERSION_HEADER:"11.10.2"};function fN(e,t){var r,i,o=n(n({},cN),t);if(o.log_disabled?l.setLogLevel(s):o.debug&&l.setLogLevel(f),aN.debug("sdkKey : "+e),e||aN.error("SDK Key must not be null"),uN)return aN.debug("use already exists hackleClient"),uN;var a=!1;"undefined"!=typeof window&&(a=window&&window.navigator&&window.navigator.sendBeacon&&!0)&&aN.debug("support sendBeacon API");var u=new Xe(e,R,{dispatchUrl:"https://event.hackle.io/api/v2/w/events",beaconDispatchUrl:"".concat("https://event.hackle.io/api/v2/w/").concat(e).concat("/events"),useBeacon:a,headers:(r={},r[h]=o.SDK_NAME_HEADER,r[v]=o.SDK_VERSION_HEADER,r)}),c=-1;void 0!==o.pollingIntervalMillis&&"number"==typeof o.pollingIntervalMillis&&o.pollingIntervalMillis>0&&(c=Math.max(o.pollingIntervalMillis,3e4));var p=new Ze(e,R,{fetchUrl:"".concat("https://client-sdk.hackle.io/api/v2/w/").concat(e).concat("/w"),updateInterval:c,headers:(i={},i[h]=o.SDK_NAME_HEADER,i[v]=o.SDK_VERSION_HEADER,i)}),d=-1;void 0!==o.exposureEventDedupIntervalMillis&&"number"==typeof o.exposureEventDedupIntervalMillis&&-1!==o.exposureEventDedupIntervalMillis&&(o.exposureEventDedupIntervalMillis<1e3||o.exposureEventDedupIntervalMillis>36e5?(aN.warn("Exposure event dedup interval is outside allowed range[1_000ms..3_600_000ms]. Setting to default value[no dedup]."),d=-1):d=o.exposureEventDedupIntervalMillis);var y=new rN(window.localStorage,"".concat("hackle-repository-storage","_").concat(e),100),g=new iN(sN.postfix(vt,"_".concat(e)),wt()),m=new oN(o.sessionTimeoutMillis,sN.postfix(vt,"_".concat(e.slice(8))));g.addListener(m);var w,E,T=new Jb(u,100,500,y),b=new rI(d),I=new tI(T,b,m,g),N=new oI(p,I,new cI(new QI),new sI),O=new gt(g),_=new Ne(N,O,m,g),A=new eI(O,N);m.addListener(A),uN=_,o.auto_track_page_view&&(E=function(){return w.trackPageView({user:{id:wt()}})},(w=_).onReady((function(){function e(e){if("function"==typeof window.Event)return new Event(e);var t={bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}E();try{history.pushState=function(t){return function(){try{var r=t.apply(this,arguments);return window.dispatchEvent(e("locationchange")),r}catch(e){if(e instanceof Error)aN.error(e);else try{aN.error(e)}catch(e){}}}}(history.pushState),history.replaceState=function(t){return function(){try{var r=t.apply(this,arguments);return window.dispatchEvent(e("locationchange")),r}catch(e){if(e instanceof Error)aN.error(e);else try{aN.error(e)}catch(e){}}}}(history.replaceState),window.addEventListener("popstate",(function(){try{window.dispatchEvent(e("locationchange"))}catch(e){if(e instanceof Error)aN.error(e);else try{aN.error(e)}catch(e){}}})),window.addEventListener("locationchange",(function(){try{E()}catch(e){if(e instanceof Error)aN.error(e);else try{aN.error(e)}catch(e){}}}))}catch(e){if(e instanceof Error)aN.error(e);else try{aN.error(e)}catch(e){}}}))),(new JI).install(N,O);var S=function(){T.drainRepository()};return document.addEventListener("visibilitychange",(function(){document.hidden||S()})),window.addEventListener("pageshow",S),window.addEventListener("onpagehide"in window?"pagehide":"unload",(function(){Tt(),m.updateLastEventTime((new Date).getTime()),_.close()})),_.onReady((function(){m.startNewSessionIfNeeded(g.currentUser,(new Date).getTime())})),_}var lN={createInstance:fN,getUserId:wt,setUserId:Et,removeUserId:Tt,Logger:l};e.Bucket=F,e.Container=ne,e.ContainerGroup=ie,e.CoreVersion=pe,e.Decision=k,e.DecisionReason=U,e.EmptyHackleRemoteConfig=M,e.EmptyParameterConfig=P,e.EventType=V,e.Experiment=D,e.FeatureFlagDecision=x,e.IdentifierType=G,e.IdentifiersBuilder=H,e.Logger=l,e.MATCH_OPERATORS=ye,e.MATCH_TYPES=he,e.MATCH_VALUE_TYPES=ve,e.MetaVersion=de,e.ParameterConfiguration=oe,e.RemoteConfigDecision=C,e.RemoteConfigParameter=se,e.RemoteConfigParameterValue=ue,e.RemoteConfigTargetRule=ae,e.SEGMENT_TYPES=we,e.Segment=re,e.Slot=j,e.TARGET_ACTION_TYPES=ge,e.TARGET_KEY_TYPES=me,e.Target=$,e.TargetAction=ee,e.TargetCondition=Q,e.TargetKey=J,e.TargetMatch=Z,e.TargetRule=te,e.TargetingType=Ee,e.Variation=L,e.Version=le,e.createInstance=fN,e.default=lN,e.getUserId=wt,e.isValidIdentifierType=z,e.isValidPropertyKeyType=K,e.isValidPropertyValueType=B,e.removeUserId=Tt,e.sanitizeIdentifier=Y,e.sanitizeIdentifiers=X,e.sanitizeProperties=W,e.sanitizeUser=q,e.setUserId=Et,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.browser.umd.min.js.map
